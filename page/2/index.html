<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
    
  
  <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet" type="text/css" />







  

<link href="//cdn.bootcss.com/font-awesome/4.6.2/css/font-awesome.min.css" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="ç§‹æ³¢çš„ç¨‹åºç”Ÿæ´»" />










<meta name="description" content="Keep running!">
<meta property="og:type" content="website">
<meta property="og:title" content="qiubo&#39;s life">
<meta property="og:url" content="http://bohr.me/page/2/index.html">
<meta property="og:site_name" content="qiubo&#39;s life">
<meta property="og:description" content="Keep running!">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="qiubo&#39;s life">
<meta name="twitter:description" content="Keep running!">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://bohr.me/page/2/"/>





  <title>qiubo's life</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?e81935b4d5ec7e3e782fe240cbd9c21c";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">qiubo's life</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Stay Hungry, Stay Foolish</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äº
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            æœç´¢
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="æœç´¢..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://bohr.me/docker/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="qiubo">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qiubo's life">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/docker/" itemprop="url">docker</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2016-01-01T21:52:17+08:00">
                2016-01-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-dockeré…ç½®"><a href="#1-dockeré…ç½®" class="headerlink" title="1. dockeré…ç½®"></a>1. dockeré…ç½®</h3><p>åœ¨mac osxä¸­ï¼Œdocker deamonè¿è¡Œåœ¨virtualboxè™šæ‹Ÿæœºä¸­ï¼Œdocker clientå’Œè™šæ‹Ÿæœºä¸­çš„docker deamonäº¤äº’ã€‚</p>
<h4 id="1-1-ç¯å¢ƒé…ç½®"><a href="#1-1-ç¯å¢ƒé…ç½®" class="headerlink" title="1.1 ç¯å¢ƒé…ç½®"></a>1.1 ç¯å¢ƒé…ç½®</h4><pre><code>#é…ç½®dockerç¯å¢ƒå˜é‡
eval &quot;$(docker-machine env default)&quot;
#é…ç½®dockerå¯åŠ¨alias    
alias docker-start=&apos;docker-machine start default&apos;
#é…ç½®dockerå…³é—­alias
alias docker-stop=&quot;docker-machine stop default&quot;
</code></pre><p>å¯åŠ¨å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre><code>docker-start
docker-stop
</code></pre><h4 id="1-2-é…ç½®é•œåƒç§æœ"><a href="#1-2-é…ç½®é•œåƒç§æœ" class="headerlink" title="1.2 é…ç½®é•œåƒç§æœ"></a>1.2 é…ç½®é•œåƒç§æœ</h4><p>æµ‹è¯•ç¯å¢ƒä¸­ç§æœæä¾›æœåŠ¡å¦‚ä¸‹ï¼š</p>
<pre><code>#docker registry ui
http://192.168.46.21:10005/
#docker registry restful api
http://192.168.46.21:5000/v2/_catalog
</code></pre><p>ä¸‹é¢é…ç½®docker registryç§æœä¸º192.168.46.21ï¼š</p>
<pre><code>#ç™»é™†åˆ°server
docker-machine ssh default

#ä¿®æ”¹/var/lib/boot2docker/profile
--insecure-registry 192.168.46.21:5000
--registry-mirror http://192.168.46.21:5000
</code></pre><p>å›½å†…docker mirrorï¼š</p>
<pre><code>https://lug.ustc.edu.cn/wiki/mirrors/help/docker
http://0b929cdf.m.daocloud.io
</code></pre><h3 id="2-docker-å¸¸ç”¨å‘½ä»¤"><a href="#2-docker-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="2. docker å¸¸ç”¨å‘½ä»¤"></a>2. docker å¸¸ç”¨å‘½ä»¤</h3><p><img src="/docker/docker-command.jpg" alt=""></p>
<pre><code>#æ‹‰å–é•œåƒ
docker pull yiji/java8:1.0

#æŸ¥çœ‹é•œåƒå†å²,èƒ½çœ‹åˆ°dockeré•œåƒå±‚çš„ç»†èŠ‚
docker history  yiji/java8:1.0

#åˆ é™¤é•œåƒ
docker rmi -f yiji/centos7:latest

#åˆ é™¤å®¹å™¨
docker rm

#æ‰§è¡Œå‘½ä»¤    
docker run yiji/centos7 /bin/echo &apos;hello world&apos;

#äº¤äº’è¿è¡Œï¼š
docker run -it yiji/centos7 /bin/bash

#æŸ¥çœ‹å®¹å™¨è¿è¡ŒçŠ¶æ€
docker ps -a

#æŸ¥çœ‹æŒ‡å®šå®¹å™¨çŠ¶æ€
docker inspect f46935242662

#æŸ¥çœ‹ç«¯å£éšå°„ï¼Œé€šè¿‡inspectç»“æœè¿‡æ»¤
docker inspect --format=&apos;{{.NetworkSettings.Ports}}&apos; 8f4a179a0647

#æŸ¥çœ‹å®¹å™¨èµ„æºå ç”¨
docker stats 92202cc1c3f0

#æŸ¥çœ‹docker deamonè¿è¡Œip
echo $DOCKER_HOST

#æ¸…ç†åå°åœæ­¢çš„å®¹å™¨
docker rm $( docker ps -a -q)

#æŸ¥çœ‹é•œåƒçš„ç¯å¢ƒå˜é‡
docker run  yiji/java8:2.0  env
</code></pre><h3 id="3-F-A-Q"><a href="#3-F-A-Q" class="headerlink" title="3. F.A.Q"></a>3. F.A.Q</h3><h4 id="3-1-dockeræ–‡ä»¶ç³»ç»Ÿ"><a href="#3-1-dockeræ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="3.1. dockeræ–‡ä»¶ç³»ç»Ÿ"></a>3.1. dockeræ–‡ä»¶ç³»ç»Ÿ</h4><p>dockeré•œåƒçš„æ–‡ä»¶ç³»ç»Ÿé‡‡ç”¨å¤šå±‚å­˜å‚¨ï¼Œé•œåƒä¸­å…¨æ˜¯åªè¯»å±‚ï¼Œä¾¿äºåˆ†å‘å’Œå…±äº«(pullé•œåƒæ—¶ï¼Œä¼šåœ¨æœ¬åœ°æ‹‰å·²ç»å­˜åœ¨çš„å±‚)ã€‚è¿è¡Œæ—¶å»ºç«‹è¯»å†™å±‚ï¼Œå¯¹äºåº”ç”¨æ¥è¯´ï¼Œéœ€è¦æŠŠæ–‡ä»¶ç³»ç»Ÿmountåˆ°dockerä¸­(è¿™æ ·æ€§èƒ½æœ€å¥½)ï¼Œdevice mapperå¯¹æ€§èƒ½æœ‰å½±å“ã€‚</p>
<blockquote>
<blockquote>
<p>Data volumes provide the best and most predictable performance. This is because they bypass the storage driver and do not incur any of the potential overheads introduced by thin provisioning and copy-on-write. For this reason, you may want to place heavy write workloads on data volumes.</p>
</blockquote>
</blockquote>
<h4 id="3-2-å…³äºåŸºç¡€é•œåƒ"><a href="#3-2-å…³äºåŸºç¡€é•œåƒ" class="headerlink" title="3.2. å…³äºåŸºç¡€é•œåƒ"></a>3.2. å…³äºåŸºç¡€é•œåƒ</h4><p>åˆ¶ä½œåŸºç¡€é•œåƒæ—¶æƒè¡¡é•œåƒå¤§å°(è™½ç„¶å¯ä»¥åœ¨ä¸»æœºä¸Šç¼“å­˜åŸºç¡€é•œåƒï¼Œä¹Ÿéœ€è¦è€ƒè™‘é¦–æ¬¡åˆ†å‘çš„å¤§å°)ã€‚æˆ‘ä»¬æœ€å¼€å§‹ä½¿ç”¨centos7æ¥åˆ¶ä½œåŸºç¡€é•œåƒï¼Œå‘ç°é•œåƒ300å¤šMï¼Œå¦‚æœåœ¨åŠ ä¸Šjava8ï¼ŒåŸºç¡€é•œåƒæœ‰600å¤šMäº†ã€‚</p>
<p>å¯ä»¥å‚è€ƒ<a href="https://hub.docker.com/r/frolvlad/alpine-oraclejdk8/" target="_blank" rel="noopener">frolvlad/alpine-oraclejdk8</a>æ¥åˆ¶ä½œåŸºç¡€é•œåƒã€‚</p>
<pre><code>REPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE
yiji/java8          2.0                 1d58b31d19a0        4 days ago          166.5 MB
</code></pre><p>java8çš„åŸºç¡€é•œåƒåªæœ‰ä¸åˆ°200mã€‚</p>
<h4 id="3-3-åˆ¶ä½œdockeré•œåƒå¹¶è¿è¡Œ"><a href="#3-3-åˆ¶ä½œdockeré•œåƒå¹¶è¿è¡Œ" class="headerlink" title="3.3. åˆ¶ä½œdockeré•œåƒå¹¶è¿è¡Œ"></a>3.3. åˆ¶ä½œdockeré•œåƒå¹¶è¿è¡Œ</h4><ol>
<li><p>ç¼–å†™Dockerfile</p>
<pre><code>FROM yiji/java8:2.0
COPY  yiji-boot-test-1.1-SNAPSHOT.jar /opt/yiji-boot-test-1.1-SNAPSHOT.jar
WORKDIR /opt
ENTRYPOINT java -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=4004 -jar /opt/yiji-boot-test-1.1-SNAPSHOT.jar
</code></pre></li>
<li><p>build   </p>
<pre><code>docker build -t  yiji-boot-test:1.0 .
</code></pre></li>
<li><p>run</p>
<pre><code>docker run -p 8081:8081 -p 4004:4004  yiji-boot-test:1.0
</code></pre><p> å…¶ä¸­8081æ˜¯åº”ç”¨webç«¯å£ï¼Œ4004ç«¯å£æ˜¯è¿œç¨‹è°ƒè¯•ç«¯å£</p>
</li>
<li><p>åœ¨å®¹å™¨å†…æ‰§è¡Œå‘½ä»¤</p>
<p> åœ¨å®¹å™¨è¿è¡Œèµ·æ¥åï¼Œæˆ‘ä»¬éœ€è¦å»å®¹å™¨å†…checkä¸‹æƒ…å†µã€‚</p>
<pre><code>docker exec -it 92202cc1c3f0  sh
</code></pre></li>
</ol>
<h4 id="3-4-dockeræœ¬åœ°å­˜å‚¨"><a href="#3-4-dockeræœ¬åœ°å­˜å‚¨" class="headerlink" title="3.4 dockeræœ¬åœ°å­˜å‚¨"></a>3.4 dockeræœ¬åœ°å­˜å‚¨</h4><p>docker å®¹å™¨è¿è¡Œçš„æ–‡ä»¶å­˜å‚¨åœ¨æœ¬åœ°ã€‚ä¸‹é¢æ¥çœ‹çœ‹è¿™äº›æ–‡ä»¶ï¼š</p>
<p>æŸ¥çœ‹docker container id</p>
<pre><code>CONTAINER ID        IMAGE                COMMAND                  CREATED             STATUS                   PORTS                                            NAMES
8f4a179a0647        yiji-boot-test:1.0   &quot;/bin/sh -c &apos;java -ag&quot;   2 hours ago         Up 2 hours               0.0.0.0:4004-&gt;4004/tcp, 0.0.0.0:8081-&gt;8081/tcp   silly_northcutt
</code></pre><p>ç™»é™†åˆ°è™šæ‹Ÿæœºï¼Œåœ¨macå’Œwindowsä¸‹ï¼Œdockeråœ¨è™šæ‹Ÿæœºä¸­è¿è¡Œ</p>
<pre><code>docker-machine ssh default
</code></pre><p>åˆ‡æ¢åˆ°dockerè¿è¡Œç›®å½•</p>
<pre><code>sudo su -
cd /var/lib/docker/aufs/mnt/
</code></pre><p><code>ls |grep 8f4a179a0647</code>å‘ç°ä¸¤ä¸ªç›®å½•</p>
<pre><code>8f4a179a064737658b4055fb785c432c843f473a9d5fc40fba445017bd5b7e2e
8f4a179a064737658b4055fb785c432c843f473a9d5fc40fba445017bd5b7e2e-init
</code></pre><p>è¿›å…¥åˆ°ç¬¬ä¸€ä¸ªç›®å½•çš„optå­ç›®å½•ä¸‹ï¼Œä¼šæ‰¾åˆ°æˆ‘ä»¬æ‰“åŒ…çš„jaræ–‡ä»¶(chrootçš„é­”åŠ›æ‰€åœ¨)</p>
<pre><code>root@default:/mnt/sda1/var/lib/docker/aufs/mnt/8f4a179a064737658b4055fb785c432c843f473a9d5fc40fba445017bd5b7e2e/opt# ls -l
total 67168
-rw-r--r--    1 root     root      68777433 Dec 28 08:26 yiji-boot-test-1.1-SNAPSHOT.jar
</code></pre><h4 id="3-5-å…³äºdockerçš„å®‰å…¨"><a href="#3-5-å…³äºdockerçš„å®‰å…¨" class="headerlink" title="3.5 å…³äºdockerçš„å®‰å…¨"></a>3.5 <a name="docker-security">å…³äºdockerçš„å®‰å…¨</a></h4><p><iframe src="//www.slideshare.net/slideshow/embed_code/key/vhMhelcV6Z9rXr" width="595" height="485" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe> <div style="margin-bottom:5px"> <strong> <a href="//www.slideshare.net/jpetazzo/docker-linux-containers-lxc-and-security" title="Docker, Linux Containers (LXC), and security" target="_blank">Docker, Linux Containers (LXC), and security</a> </strong> from <strong><a href="//www.slideshare.net/jpetazzo" target="_blank">JÃ©rÃ´me Petazzoni</a></strong> </div></p>
<p>æˆ‘ä»¬éœ€è¦åšä¸¤ä»¶äº‹æƒ…ï¼Œ</p>
<ol>
<li><p>ä¸è¦ä½¿ç”¨root in docker</p>
<p> å‚è€ƒ<a href="http://stackoverflow.com/questions/24308760/running-app-inside-docker-as-non-root-user" target="_blank" rel="noopener">Running app inside Docker as non-root user</a></p>
</li>
<li><p>ç»å¸¸å‡çº§å†…æ ¸</p>
</li>
</ol>
<p>åšå®‰å…¨çš„åŒå­¦å¯ä»¥çœ‹çœ‹æ›´å¤šå…³äºdocker å®‰å…¨çš„æ–‡ç« :</p>
<p><a href="https://github.com/docker/docker-bench-security" target="_blank" rel="noopener">docker-bench-security</a></p>
<p><a href="https://github.com/konstruktoid/Docker/blob/master/Security/CheatSheet.md" target="_blank" rel="noopener">Security CheatSheet</a></p>
<p><a href="https://benchmarks.cisecurity.org/tools2/docker/CIS_Docker_1.6_Benchmark_v1.0.0.pdf" target="_blank" rel="noopener">CIS Docker 1.6 Benchmark</a></p>
<p>æœ€åå¼•ç”¨<a href="https://twitter.com/mortman" target="_blank" rel="noopener">David Mortman</a>åœ¨2015å¹´<a href="https://www.defcon.org/" target="_blank" rel="noopener">Defcon</a>çš„ä¸€å¥è¯ï¼š</p>
<blockquote>
<blockquote>
<p>a year ago, [docker and security] was pretty horrible,six months ago it wasnâ€™t so bad, and now itâ€™s pretty usable.</p>
</blockquote>
</blockquote>
<h4 id="3-6-docker-run-vm"><a href="#3-6-docker-run-vm" class="headerlink" title="3.6 docker run vm?"></a>3.6 docker run vm?</h4><p>ä¸€äº›è§‚ç‚¹ï¼š</p>
<p><a href="http://dockone.io/article/935" target="_blank" rel="noopener">2016å¹´å…­å¤§OpenStack &amp; Dockerå‘å±•è¶‹åŠ¿é¢„æµ‹</a></p>
<blockquote>
<blockquote>
<p>ç”±åŸæœ¬çš„è™šæ‹Ÿæœºç®¡ç†ç¨‹åºä¸ºæ ¸å¿ƒè½¬å˜ä¸ºå®¹å™¨åŠ è£¸æœºç»„åˆæ¨¡å¼</p>
</blockquote>
</blockquote>
<p><a href="http://www.infoq.com/cn/news/2015/12/hypernetes-caas" target="_blank" rel="noopener">Hyperneteså®ç°å¤šç§Ÿæˆ·CaaSï¼Œä¸”æ— éœ€å®¢æˆ·æ“ä½œç³»ç»Ÿ</a></p>
<blockquote>
<blockquote>
<p>OpenStackæ˜¯ä¸€ä¸ªç”¨äºæ„å»ºå’Œç®¡ç†äº‘çš„IaaSæ¡†æ¶ï¼ŒHypernetesä½¿ç”¨äº†å®ƒçš„éƒ¨åˆ†ç»„ä»¶ã€‚å®ƒä½¿ç”¨OpenStackçš„èº«ä»½å’ŒæœåŠ¡ç›®å½•æä¾›ç¨‹åºKeystoneè¿›è¡Œèº«ä»½éªŒè¯å’Œæˆæƒã€‚å®ƒè¿˜ä½¿ç”¨äº†å…¶ä»–çš„OpenStackç»„ä»¶ï¼Œå¦‚ç”¨äºå­˜å‚¨çš„Cinderå’ŒCephï¼Œç”¨äºç½‘ç»œç®¡ç†çš„Neutronã€‚å¯¹äºOpenStackè€Œè¨€ï¼Œè¿™æ˜¯ä¸€ä¸ªç‹¬ç‰¹çš„ç”¨æ³•ï¼Œå› ä¸ºå…¶ç»„ä»¶é€šå¸¸éƒ½ä¸åœ¨OpenStackéƒ¨ç½²ä¹‹å¤–ä½¿ç”¨ã€‚</p>
</blockquote>
</blockquote>
<h4 id="3-7-docker-api"><a href="#3-7-docker-api" class="headerlink" title="3.7 docker api"></a>3.7 docker api</h4><h5 id="3-7-1-unix-socket-api"><a href="#3-7-1-unix-socket-api" class="headerlink" title="3.7.1 unix-socket api"></a>3.7.1 unix-socket api</h5><p>æŸ¥çœ‹dockerä¿¡æ¯:</p>
<pre><code>curl --unix-socket /var/run/docker.sock http:/info |jq
</code></pre><p>apiæ–‡æ¡£:</p>
<pre><code>https://docs.docker.com/engine/reference/api/docker_remote_api/
</code></pre><h5 id="3-7-2-java-api"><a href="#3-7-2-java-api" class="headerlink" title="3.7.2 java api"></a>3.7.2 java api</h5><p>ä¾èµ–ï¼š</p>
<pre><code>&lt;dependency&gt;
        &lt;groupId&gt;com.github.docker-java&lt;/groupId&gt;
        &lt;artifactId&gt;docker-java&lt;/artifactId&gt;
        &lt;version&gt;3.0.1&lt;/version&gt;
        &lt;exclusions&gt;
            &lt;exclusion&gt;
                &lt;groupId&gt;de.gesellix&lt;/groupId&gt;
                &lt;artifactId&gt;unix-socket-factory&lt;/artifactId&gt;
            &lt;/exclusion&gt;
        &lt;/exclusions&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.kohlschutter.junixsocket&lt;/groupId&gt;
        &lt;artifactId&gt;junixsocket-common&lt;/artifactId&gt;
        &lt;version&gt;2.0.4&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.kohlschutter.junixsocket&lt;/groupId&gt;
        &lt;artifactId&gt;junixsocket-native-common&lt;/artifactId&gt;
        &lt;version&gt;2.0.4&lt;/version&gt;
    &lt;/dependency&gt;
</code></pre><p> ä½¿ç”¨ï¼š</p>
<pre><code> DockerClient dockerClient = DockerClientBuilder.getInstance(&quot;unix:///var/run/docker.sock&quot;).build();
Info info = dockerClient.infoCmd().exec();
System.out.print(info);
</code></pre><p>apiæ–‡æ¡£:</p>
<pre><code>https://github.com/docker-java/docker-java/
</code></pre><h4 id="3-8-docker-on-centos7é…ç½®"><a href="#3-8-docker-on-centos7é…ç½®" class="headerlink" title="3.8 docker on centos7é…ç½®"></a>3.8 docker on centos7é…ç½®</h4><p>centos7ä½¿ç”¨systemdæ¥ç®¡ç†æœåŠ¡ï¼Œdockeré…ç½®æ–‡ä»¶<code>/lib/systemd/system/docker.service</code>ã€‚æ¯”å¦‚å¢åŠ tcp apiç«¯å£ï¼Œä¿®æ”¹</p>
<pre><code>ExecStart=/usr/bin/dockerd
ExecStart=/usr/bin/dockerd -H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock --insecure-registry catalog.shurenyun.com
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://bohr.me/why-react/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="qiubo">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qiubo's life">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/why-react/" itemprop="url">Why react?</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2015-12-01T21:52:17+08:00">
                2015-12-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æ˜¨å¤©ç»™æœ‹å‹æ¨èäº†<code>React</code>ï¼Œä½†å¿ƒé‡Œè¿˜çœŸæ²¡æœ‰åº•ï¼Œè¿™é‡Œæ•´ç†ä¸‹èµ„æ–™ï¼Œå¦‚æœä¸è€ƒè™‘æµè§ˆå™¨å…¼å®¹æ€§çš„é—®é¢˜ï¼Œè¿™ä¸œä¸œçœŸä¸é”™ğŸ˜„ã€‚</p>
<h4 id="1-è™šæ‹Ÿdomæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-è™šæ‹Ÿdomæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1. è™šæ‹Ÿdomæ˜¯ä»€ä¹ˆï¼Ÿ"></a>1. è™šæ‹Ÿdomæ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>è™šæ‹ŸDOMæ˜¯HTML DOMçš„æŠ½è±¡ï¼Œå®ƒå’Œæµè§ˆå™¨çš„å®ç°åˆ†ç¦»ã€‚</p>
<h4 id="2-ä¸ºä»€ä¹ˆè™šæ‹Ÿdomå¿«ï¼Ÿ"><a href="#2-ä¸ºä»€ä¹ˆè™šæ‹Ÿdomå¿«ï¼Ÿ" class="headerlink" title="2. ä¸ºä»€ä¹ˆè™šæ‹Ÿdomå¿«ï¼Ÿ"></a>2. ä¸ºä»€ä¹ˆè™šæ‹Ÿdomå¿«ï¼Ÿ</h4><p>DOMæ‹–æ…¢JavaScriptã€‚æ‰€æœ‰çš„DOMæ“ä½œéƒ½æ˜¯åŒæ­¥çš„ï¼Œä¼šå µå¡æµè§ˆå™¨ã€‚JavaScriptæ“ä½œDOMæ—¶ï¼Œå¿…é¡»ç­‰å‰ä¸€ä¸ªæ“ä½œç»“æŸï¼Œæ‰èƒ½æ‰§è¡Œåä¸€ä¸ªæ“ä½œã€‚åªè¦ä¸€ä¸ªæ“ä½œæœ‰å¡é¡¿ï¼Œæ•´ä¸ªç½‘é¡µå°±ä¼šçŸ­æš‚å¤±å»å“åº”ã€‚æµè§ˆå™¨é‡ç»˜ç½‘é¡µçš„é¢‘ç‡æ˜¯60FPSï¼ˆå³16æ¯«ç§’/å¸§ï¼‰ï¼ŒJavaScriptåšä¸åˆ°åœ¨16æ¯«ç§’å†…å®ŒæˆDOMæ“ä½œï¼Œå› æ­¤äº§ç”Ÿäº†è·³å¸§ã€‚è™šæ‹Ÿdomçš„æ”¹å˜å¹¶ä¸ä¼šå¼•èµ·æµè§ˆå™¨domçš„æ”¹å˜ï¼Œè€Œæ˜¯ç”±Reactåœ¨åˆé€‚çš„æ—¶æœºæ¯”è¾ƒå·®å¼‚å¹¶æ¸²æŸ“ï¼Œä¿è¯<code>FPS</code>ã€‚</p>
<h4 id="3-Why-is-Reactâ€™s-concept-of-Virtual-DOM-said-to-be-more-performant-than-dirty-model-checking"><a href="#3-Why-is-Reactâ€™s-concept-of-Virtual-DOM-said-to-be-more-performant-than-dirty-model-checking" class="headerlink" title="3. Why is Reactâ€™s concept of Virtual DOM said to be more performant than dirty model checking?"></a>3. Why is Reactâ€™s concept of Virtual DOM said to be more performant than dirty model checking?</h4><p>React knows when to re-render the scene because it is able to <strong>observe when this data changes</strong>. Dirty checking is slower than observables because you must poll the data at a regular interval and check all of the values in the data structure recursively. By comparison, setting a value on the state will signal to a listener that some state has changed, so React can simply listen for change events on the state and queue up re-rendering.(è¿™ç‚¹éšç€es6çš„<code>Proxy</code>åˆ°æ¥ï¼Œ<code>AngularJS</code>ä¼šè¶Šæ¥è¶Šå¼ºå¤§ğŸ˜„)</p>
<h4 id="4-What-makes-React-fast"><a href="#4-What-makes-React-fast" class="headerlink" title="4. What makes React fast ?"></a>4. What makes React fast ?</h4><ul>
<li>Batched DOM read/write operations.</li>
<li>Efficient update of sub-tree only.</li>
</ul>
<p>Compared to dirty-check, the key differences IMO are:</p>
<p>Model dirty-checking: React component is explicitly set as dirty whenever setState is called, so thereâ€™s no comparison (of the data) needed here. For dirty-checking, the comparison (of the models) always happen each digest loop.</p>
<p>DOM updating: DOM operations are very expensive because modifying the DOM will also apply and calculate CSS styles, layouts. The saved time from unnecessary DOM modification can be longer than the time spent diffing the virtual DOM.</p>
<h4 id="4-Whatâ€™s-the-problem-of-template-engineï¼Ÿ"><a href="#4-Whatâ€™s-the-problem-of-template-engineï¼Ÿ" class="headerlink" title="4. Whatâ€™s the problem of template engineï¼Ÿ"></a>4. Whatâ€™s the problem of template engineï¼Ÿ</h4><p>Template languages express the initial render of your application, and youâ€™re responsible for manually mutating the state of the UI when your backing data changes and events occur.</p>
<h4 id="5-how-to-run"><a href="#5-how-to-run" class="headerlink" title="5. how to run ?"></a>5. how to run ?</h4><p><img src="/why-react/reactjs.png" alt=""></p>
<p>ä¸Šé¢éƒ¨åˆ†æ˜¯ç”¨æˆ·è§¦å‘çš„ï¼Œä¸‹é¢éƒ¨åˆ†æ˜¯å®šæ—¶è§¦å‘çš„ã€‚</p>
<p>é¦–å…ˆè¯´ä¸Šé¢éƒ¨åˆ†ï¼š</p>
<ol>
<li>ç”¨æˆ·ç‚¹å‡»æŸdom</li>
<li><p><code>top-level event handler</code>åˆ†å‘äº‹ä»¶åˆ°æŒ‡å®šçš„<code>event handler</code></p>
<p> <code>top-level event handler</code>æŒ‡çš„æ˜¯<code>document</code>ä¸Šçš„<code>event handler</code>,è¿™ç§æ–¹å¼èƒ½å¤Ÿæé«˜æ€§èƒ½(å› ä¸ºåœ¨æ¯ä¸ªçœŸå®çš„domä¸Šé¢ç»‘å®šäº‹ä»¶æ˜¯éå¸¸æ…¢çš„)å¹¶ä¸”è·¨æµè§ˆå™¨(æµè§ˆå™¨ä¸­çš„äº‹ä»¶æœ¬èº«å°±æ²¡æœ‰ç»Ÿä¸€)</p>
</li>
<li><p>ç”¨æˆ·ä»£ç è°ƒç”¨setState()</p>
<p> <code>AngularJS</code>åŒå‘ç»‘å®šï¼Œä¸éœ€è¦ç”¨æˆ·è°ƒç”¨çŠ¶æ€å˜æ›´ã€‚æ‰€ä»¥ï¼Œå¿…é¡»è¦å»åšå¤§é‡çš„<code>dirty check</code>ã€‚è™½ç„¶æ˜¯ä¸€ç§å€’é€€ï¼Œä½†æ˜¯ä¸ºäº†æ€§èƒ½å¿äº†ï¼Œç­‰ES6å§ã€‚</p>
</li>
</ol>
<p>ä¸‹é¢éƒ¨åˆ†çš„é€»è¾‘ï¼š<code>event loop</code>å‘¨æœŸæ€§çš„æ£€æŸ¥æœ‰çŠ¶æ€ç»„ä»¶æ˜¯å¦<code>dirty</code>ï¼Œç„¶åé€šè¿‡<code>diff</code>ç®—æ³•æ‰¹é‡æ›´æ–°æµè§ˆå™¨domæ ‘ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://bohr.me/be-happy/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="qiubo">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qiubo's life">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/be-happy/" itemprop="url">don't worry, be happy!</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2015-11-22T21:52:17+08:00">
                2015-11-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="æƒ…ç»ªåœ°é›·åŒºé¿é›·æ–¹æ¡ˆï¼š"><a href="#æƒ…ç»ªåœ°é›·åŒºé¿é›·æ–¹æ¡ˆï¼š" class="headerlink" title="æƒ…ç»ªåœ°é›·åŒºé¿é›·æ–¹æ¡ˆï¼š"></a>æƒ…ç»ªåœ°é›·åŒºé¿é›·æ–¹æ¡ˆï¼š</h3><ol>
<li>å®‰æ’Bè®¡åˆ’ (æ¯”å¦‚ç­‰äººåƒé¥­ï¼Œæå‰å‡†å¤‡ç‚¹äº‹åšï¼Œåˆ«äººæ²¡åˆ°å°±åšè‡ªå·±çš„äº‹)</li>
<li>å…¬å¼€è‡ªå·±çš„æƒ…ç»ªæ­»ç©´ (æ¯”å¦‚æå‰ç»™äººè¯´å“ªäº›æ˜¯ä¸å–œæ¬¢çš„ï¼Œå¦‚æœä½ è¿™æ ·åšäº†ï¼Œæˆ‘ä¹Ÿé¿å…ä¸äº†æˆ‘ä¸å‘è„¾æ°”)</li>
</ol>
<h3 id="æƒ…ç»ªç®¡ç†åœ¨ç”Ÿæ´»ä¸å·¥ä½œä¸­çš„åº”ç”¨"><a href="#æƒ…ç»ªç®¡ç†åœ¨ç”Ÿæ´»ä¸å·¥ä½œä¸­çš„åº”ç”¨" class="headerlink" title="æƒ…ç»ªç®¡ç†åœ¨ç”Ÿæ´»ä¸å·¥ä½œä¸­çš„åº”ç”¨"></a>æƒ…ç»ªç®¡ç†åœ¨ç”Ÿæ´»ä¸å·¥ä½œä¸­çš„åº”ç”¨</h3><ol>
<li><p>æ­£å‘æ€è€ƒ</p>
<p> å‡¡äº‹å¾€æ­£é¢çš„è§’åº¦å»æƒ³ï¼Œé€‰å–å¯¹è‡ªå·±æœ€æœ‰åˆ©çš„æ³¨è§£</p>
</li>
<li><p>è½¬ç§»æ³¨æ„åŠ›</p>
<p> å»åšèƒ½å¸¦æ¥å¥½æƒ…ç»ªçš„æ´»åŠ¨æˆ–äº‹æƒ…ã€‚æ¯”å¦‚åƒè‡ªå·±æœ€å–œçˆ±çš„é£Ÿç‰©</p>
</li>
<li><p>è®©å¼€æ”¾çš„è‚¢ä½“åŠ¨ä½œå¸¦åŠ¨æƒ…ç»ª</p>
<p> æ¯”å¦‚å»çˆ¬å±±ï¼Œå»è·‘æ­¥ï¼Œå»æ—…æ¸¸ã€‚</p>
</li>
<li><p>é€è¿‡é—®å¥å¼•å¯¼è‡ªå·±æ”¹å˜è®¤çŸ¥</p>
<pre><code>a.å¯¹æ–¹æ˜¯æ•…æ„çš„è¿˜æ˜¯æ— å¿ƒçš„ï¼Ÿ
b.è¿™ä»¶äº‹è¿˜æœ‰æ²¡æœ‰å…¶ä»–è§’åº¦ä¸æ„ä¹‰å¯ä»¥è®©æˆ‘æ„Ÿè§‰æ›´å¥½ï¼Ÿ
c.å¦‚æœæˆ‘å¸Œæœ›è‡ªå·±çš„æƒ…ç»ªå˜å¥½ï¼Œç°åœ¨æˆ‘åº”è¯¥åšä»€ä¹ˆï¼Ÿ
d.è¿™æ ·åšæ˜¯çœŸçš„ä¼šè®©æƒ…ç»ªå˜å¥½è¿˜æ˜¯ä¼šæœ‰åé—ç—‡ï¼Ÿ
e.æˆ‘å¯ä»¥å¯»æ±‚è°çš„å¸®åŠ©æ¥æ”¹å–„è‡ªå·±çš„æƒ…ç»ªï¼Ÿ
</code></pre></li>
</ol>
<ol>
<li>å‘ç°è‡ªå·±æƒ…ç»ªæœ‰å¤±æ§çš„æ„Ÿè§‰æˆ–å€¾å‘ï¼Œå¿…è¦æ—¶ç¦»å¼€ç°åœº</li>
<li>æŠŠä¸æ»¡ã€æ„¤æ€’ã€å¤±æ„ç­‰è´Ÿé¢æƒ…ç»ªå†™åœ¨çº¸ä¸Šï¼Œç„¶åçƒ§æ‰ã€å†²æ‰ã€å¯„å‡ºæˆ–è€…æ”¶è—</li>
<li>äº†è§£è‡ªèº«çš„æœ‰ç‚¹ï¼Œç§¯æè¡¨ç°è‡ªå·±ï¼Œä½†æ±‚å°½å¿ƒå°½åŠ›</li>
<li>å¤šçœ‹åˆ«äººçš„å¥½ï¼Œé€‚åº¦äºˆä»¥å®½å®¹çš„å¯¹å¾…</li>
<li><p>æ¥è¿‘æ‹¥æœ‰å¿ƒçµæ™ºæ…§çš„è‰¯å¸ˆç›Šå‹</p>
<p> æ™ºæ…§ä¸èµ·çƒ¦æ¼ï¼Œæ…ˆæ‚²æ²¡æœ‰æ•Œäºº</p>
</li>
<li><p>æé†’è‡ªå·±ï¼šä¸–é—´äº‹éƒ½åªæ˜¯è¿‡ç¨‹è€Œéç»“æœ</p>
<p>æ¯ä»¶äº‹æœ€ç»ˆéƒ½ä¼šè¿‡å»ï¼ŒåŒ…æ‹¬æˆ‘è‡ªå·±(å‡¡äººå¿…æœ‰ä¸€æ­»)</p>
</li>
<li><p>å…¨åŠ›ä»¥èµ´åï¼Œæ”¾ä¸‹å¾—å¤±å¿ƒï¼Œå› ä¸ºä½ æ²¡æœ‰åŠæ³•å†³å®šæ‰€æœ‰çš„äº‹ä¸€å®šå¦‚ä½ æ‰€æ„¿</p>
<p>æˆ˜èƒœå¯¹æ‰‹åªæ˜¯äººç”Ÿçš„èµ¢å®¶ï¼Œæˆ˜èƒœè‡ªå·±æ‰æ˜¯å‘½è¿çš„å¼ºè€…</p>
</li>
</ol>
<h3 id="å“ˆä½›å¤§å­¦æ¨è20ä¸ªå¿«ä¹çš„ä¹ æƒ¯"><a href="#å“ˆä½›å¤§å­¦æ¨è20ä¸ªå¿«ä¹çš„ä¹ æƒ¯" class="headerlink" title="å“ˆä½›å¤§å­¦æ¨è20ä¸ªå¿«ä¹çš„ä¹ æƒ¯"></a>å“ˆä½›å¤§å­¦æ¨è20ä¸ªå¿«ä¹çš„ä¹ æƒ¯</h3><ol>
<li><p>be grateful    (å­¦ä¼šæ„Ÿæ©)</p>
<p> è®©è‡ªå·±å˜æ…¢è„šæ­¥ï¼Œçœ‹çœ‹ä½ çš„å››å‘¨ï¼Œå…³æ³¨ç”Ÿæ´»ä¸­çš„ç»†å¾®ä¹‹å¤„ï¼šäººè¡Œé“ä¸Šæ·¡ç´«è‰²çš„èŠ±ï¼Œç¾ä¸½çš„æ—¥è½ï¼Œæ´—å»ä½ ä¸€å¤©ç–²æƒ«çš„æ·‹æµ´ï¼Œä¼´ä¾£çœ¼ä¸­çš„ç¬‘å®¹ã€‚å½“ä½ çš„æ„Ÿæ©ä¹‹å¿ƒèƒ½å¤Ÿæ¬£èµç”Ÿæ´»çš„ç¾ï¼Œæ€è€ƒå’Œç¥ç¦ï¼Œä½ è‡ªç„¶å°±å……æ»¡äº†å¹¸ç¦æ„Ÿã€‚</p>
</li>
<li><p>choose your friedns wisely</p>
<p> å¦‚æœä½ æƒ³å˜å¾—å¼€å¿ƒçš„è¯ï¼Œè¦é€‰æ‹©å’Œä¹è§‚çš„æœ‹å‹åœ¨ä¸€èµ·ï¼Œä»–ä»¬èƒ½æ¬£èµä½ çœŸå®çš„è‡ªå·±ï¼Œè®©ä½ çš„ç”Ÿæ´»å˜å¾—æ›´ä¸°å¯Œï¼Œå¿«ä¹ï¼Œæœ‰æ„ä¹‰ã€‚</p>
</li>
<li><p>cultivate compassion (åŸ¹å…»åŒæƒ…å¿ƒ)</p>
<p> å½“æˆ‘ä»¬ä»£æ›¿åˆ«äººï¼Œç«™åœ¨å¦ä¸€ä¸ªè§’åº¦çœ‹é—®é¢˜ï¼Œæˆ‘ä»¬æ›´èƒ½ç”¨åŒæƒ…å¿ƒï¼Œå®¢è§‚å’Œæœ‰æ•ˆçš„å¤„ç†é—®é¢˜ã€‚ç”Ÿæ´»ä¸­å°±ä¼šå°‘ä¸€äº›å†²çªï¼Œå¤šä¸€ç‚¹å¿«ä¹ã€‚</p>
</li>
<li><p>keep leaning</p>
<p> å­¦ä¹ è®©æˆ‘ä»¬ä¿æŒå¹´è½»ï¼Œæ¢¦æƒ³è®©æˆ‘ä»¬å……æ»¡æ´»åŠ›ã€‚æˆ‘ä»¬è¿ç”¨å¤§è„‘ï¼Œè¿›è¡Œè¿ä½œçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±ä¸å¤§ä¼šæƒ³ä¸å¼€å¿ƒå¿ƒçš„äº‹æƒ…ï¼Œæˆ‘ä»¬ä¼šå˜å¾—æ›´å¼€å¿ƒå’Œæ»¡è¶³ã€‚</p>
</li>
<li><p>become a problem solver (å­¦ä¼šè§£å†³é—®é¢˜)</p>
</li>
<li>do what you love</li>
<li><p>live in the present</p>
<p> ä½ æ„Ÿåˆ°æ²®ä¸§ï¼Œæ˜¯å› ä¸ºä½ æ´»åœ¨è¿‡å»ã€‚ä½ ä¼šæ„Ÿåˆ°æ‹…å¿§å’Œç„¦è™‘ï¼Œæ˜¯å› ä¸ºä½ æ´»åœ¨æœªæ¥ã€‚ä½†æ˜¯å½“ä½ æ„Ÿåˆ°æ»¡è¶³ï¼Œå¼€å¿ƒå’Œå¹³å’Œæ—¶ï¼Œä½ æ‰æ˜¯æ´»åœ¨å½“ä¸‹ã€‚</p>
</li>
<li><p>laugh often</p>
<p> ã€€ç¬‘æ˜¯å¯¹æŠ—ç”Ÿæ°”æˆ–æ²®ä¸§æœ€æœ‰åŠ›çš„çš„ä¸œè¥¿ã€‚ä¸è¦æŠŠç”Ÿæ´»çœ‹çš„å¤ªä¸¥è‚ƒã€‚è¦å­¦ä¼šåœ¨æ¯æ—¥çš„å¥‹æ–—ä¸­å¯»æ‰¾å¹½é»˜æ„Ÿå’Œç¬‘å£°ã€‚
 ã€€</p>
</li>
<li><p>practice forgiveness</p>
<p> æ†æ¨å’Œç”Ÿæ°”æ˜¯å¯¹è‡ªæˆ‘çš„æƒ©ç½šã€‚å½“ä½ é‡Šæ€€çš„æ—¶å€™ï¼Œäº‹å®ä¸Šä½ æ˜¯åœ¨å¯¹è‡ªå·±æ–½ä»¥å–„æ„ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œå­¦ä¼šåŸè°…è‡ªå·±ã€‚æ¯ä¸ªäººéƒ½çŠ¯é”™ã€‚åªæœ‰é€šè¿‡æˆ‘ä»¬çš„é”™è¯¯ï¼Œæˆ‘ä»¬æ‰æ…¢æ…¢å­¦ä¼šå¦‚ä½•æˆä¸ºä¸€ä¸ªæ›´å¼ºå¤§ï¼Œæ›´å¥½çš„äººã€‚</p>
</li>
<li><p>say thanks often</p>
<p>å¯¹ç”Ÿæ´»ä¸­çš„ç¥ç¦è¦å­¦ä¼šæ¬£èµã€‚å‘é‚£äº›è®©ä½ ç”Ÿæ´»å˜å¥½çš„äººï¼Œæ— è®ºæˆ–å¤§æˆ–å°ï¼Œè¡¨è¾¾å‡ºä½ çš„æ¬£èµä¹‹æƒ…ä¹ŸåŒæ ·é‡è¦ã€‚</p>
</li>
<li><p>create deeper connections ï¼ˆå­¦ä¼šæ·±äº¤ï¼‰</p>
<p>æˆ‘ä»¬çš„å¹¸ç¦æ„Ÿä¼šåœ¨å’Œå¦ä¸€ä¸ªäººçš„æ·±äº¤ä¸­ä¸æ–­çŒ›å¢ã€‚ä¸“æ³¨è†å¬æ˜¯åŠ å¼ºè¿™ç§å…³ç³»çº½å¸¦å’ŒæŠŠå¹¸ç¦æ„Ÿå¸¦ç»™è‡ªå·±å’Œåˆ«äººçš„ä¸¤ä¸ªæœ€é‡è¦çš„æ–¹é¢ã€‚</p>
</li>
<li><p>keep you agreement</p>
<p>æˆ‘ä»¬çš„è‡ªå°Šæ˜¯å»ºç«‹åœ¨æˆ‘ä»¬å¯¹è‡ªå·±å®ˆæ‰¿è¯ºçš„æƒ…å†µä¸‹ã€‚é«˜åº¦çš„è‡ªå°Šå’Œå¹¸ç¦æ„Ÿæœ‰ç›´æ¥å…³è”ã€‚æ‰€ä»¥è¦å¯¹è‡ªå·±å’Œåˆ«äººéµå®ˆæ‰¿è¯ºã€‚</p>
</li>
<li><p>meditate ï¼ˆå†¥æƒ³ï¼‰</p>
</li>
<li><p>focus on what youâ€™re doing</p>
<p>å½“ä½ å…¨èº«å¿ƒæŠ•å…¥ä¸€ä»¶äº‹çš„æ—¶å€™ï¼Œä½ å°±ä¼šå¤„äºä¸€ä¸ªå¼€å¿ƒçš„çŠ¶æ€ã€‚å½“æˆ‘ä»¬å¤„äºè¿™ç§çŠ¶æ€ï¼Œä½ å°±ä¸å¤§ä¼šå…³å¿ƒåˆ«äººå¯¹ä½ æ€ä¹ˆçœ‹ï¼Œä¸å¤§ä¼šè¢«ä¸å¤§é‡è¦çš„äº‹æƒ…å¹²æ‰°ã€‚ç»“æœå‘¢ï¼Ÿæ›´å¹¸ç¦ï¼Œå½“ç„¶å•¦ï¼</p>
</li>
<li><p>be optimistic</p>
<p>å¯¹äºå¼€å¿ƒçš„äººæ¥è¯´ï¼Œç»ç’ƒéƒ½ä¸€ç›´æ˜¯åŠæ»¡çš„ã€‚æ¯å½“ä½ é¢å¯¹ä¸€ä¸ªæŒ‘æˆ˜æ—¶ï¼Œå¦‚æœä½ å€¾å‘äºæƒ³è±¡æœ€åçš„æƒ³æ³•ï¼Œé‚£å°±è‡ªæˆ‘è½¬æ¢è¿™ç§æƒ…å†µã€‚å‘Šè¯‰ä½ è‡ªå·±ä¸€ä¸ªçŠ¶å†µä¸­çš„å¥½å¤„æˆ–è€…ä½ ä»ä¸­å­¦åˆ°çš„ä¸œè¥¿ã€‚ä¹è§‚è‚¯å®šèƒ½é©±åŠ¨æˆåŠŸå’Œå¹¸ç¦æ„Ÿã€‚</p>
</li>
<li><p>love unconditionally</p>
<p>æ²¡äººæ˜¯å®Œç¾çš„,æ¥å—ä½ è‡ªå·±æ‰€æœ‰çš„ä¸å®Œç¾,ä¹Ÿè¦è¿™æ ·å¯¹å¾…åˆ«äººã€‚æ— æ¡ä»¶çš„çˆ±ä¸€ä¸ªäººå¹¶ä¸æ„å‘³ç€ä½ è¦èŠ±æ‰€æœ‰çš„æ—¶é—´å’Œä»–ä»¬åœ¨ä¸€èµ·ï¼Œæˆ–è€…å¸®åŠ©ä»–ä»¬è§£å†³é—®é¢˜ã€‚æ— æ¡ä»¶çš„çˆ±æ„å‘³ç€æ¥å—çœŸå®çš„ä»–ä»¬ï¼Œä»¥ä»–ä»¬è‡ªå·±çš„æ­¥ä¼ï¼Œè®©ä»–ä»¬è‡ªå·±æ‘¸ç´¢ã€‚</p>
</li>
<li><p>donâ€™t give up</p>
<p>æ²¡æœ‰å®Œæˆçš„æ–¹æ¡ˆå’Œä¸æ–­çš„å¤±è´¥ä¸å¯é¿å…çš„ä¼šå‰Šå¼±ä½ çš„è‡ªå°Šã€‚å¦‚æœä½ å†³å®šåšæŸäº‹ï¼Œåšå®Œå®ƒã€‚</p>
</li>
<li><p>do you best and then let go</p>
<p>æ¯ä¸ªäººéƒ½æœ‰å±€é™æ€§ã€‚è€Œä¸”æœ‰æ—¶å€™å°½ç®¡æˆ‘ä»¬å¾ˆåŠªåŠ›åšä¸€ä»¶äº‹æƒ…ï¼Œä½†æ˜¯æ€»ä¼šäº‹ä¸æ„¿è¿ã€‚æ‰€ä»¥åšæœ€å¥½çš„è‡ªå·±ï¼Œç„¶åæ”¾æ‰‹ã€‚å½“ä½ å°½äº†å…¨åŠ›ï¼Œä½ å°±æ²¡æœ‰é—æ†¾äº†ã€‚</p>
</li>
<li><p>take care of yourself</p>
<p>ä¸€ä¸ªå¥åº·çš„èº«ä½“æ˜¯å¹¸ç¦çš„å…³é”®ã€‚å¦‚æœä½ èº«ä½“ä¸å¥½ï¼Œä½ æ— è®ºå¦‚ä½•åŠªåŠ›ï¼Œéƒ½å¾ˆéš¾å¿«ä¹ã€‚ç¡®ä¿¡è‡ªå·±åƒå¾—å¥½ï¼Œåšé”»ç‚¼ï¼Œæ‰¾ç‚¹æ—¶é—´ä¼‘æ¯ã€‚å¥½å¥½ç…§é¡¾ä½ çš„èº«ä½“ï¼Œå¤§è„‘å’Œç²¾ç¥ã€‚</p>
</li>
<li><p>give back ï¼ˆå­¦ä¼šç»™äºˆï¼‰</p>
<p>åšå¥½äº‹æ˜¯æœ€èƒ½ç¡®ä¿ä½ å¿ƒæƒ…å¥½çš„æ–¹æ³•ä¹‹ä¸€ã€‚æ ¹æ®å“ˆä½›ï¼Œäººä»¬åšå¥½äº‹ï¼Œä»–ä»¬çš„å¤§è„‘å˜å¾—æ´»è·ƒï¼Œå°±å¥½åƒå½“ä½ ç»å†åˆ«çš„å¥–åŠ±æ—¶ï¼Œå¤§è„‘æ‰€å—çš„åˆºæ¿€ã€‚æ‰€ä»¥ï¼Œé‚£äº›å…³å¿ƒåˆ«äººçš„äººè¦æ¯”ä¸å¤§å…³å¿ƒåˆ«äººçš„äººæ›´å¼€å¿ƒã€‚</p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://bohr.me/2015-11-reading-notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="qiubo">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qiubo's life">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015-11-reading-notes/" itemprop="url">2015å¹´11æœˆReading Notes</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2015-11-01T21:52:17+08:00">
                2015-11-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Next-Generation-Session-Management-with-Spring-Session"><a href="#Next-Generation-Session-Management-with-Spring-Session" class="headerlink" title="Next Generation Session Management with Spring Session"></a><a name="spring-session">Next Generation Session Management with Spring Session</a></h2><p><a href="http://www.infoq.com/articles/Next-Generation-Session-Management-with-Spring-Session" target="_blank" rel="noopener">http://www.infoq.com/articles/Next-Generation-Session-Management-with-Spring-Session</a></p>
<p>åœ¨å¤§è§„æ¨¡é›†ç¾¤çš„åœºæ™¯ï¼Œæ— çŠ¶æ€çš„åº”ç”¨èƒ½å‡å°‘è¿ç»´æˆæœ¬ã€ç¼©çŸ­åº”ç”¨æ¢å¤æ—¶é—´ã€‚spring sessionä¸»è¦è§£å†³äº†webåº”ç”¨sessionæŒä¹…åŒ–çš„é—®é¢˜ã€‚æŠŠsessionå­˜å‚¨åœ¨åº”ç”¨å¤–éƒ¨ï¼Œè®©åº”ç”¨æ— çŠ¶æ€ã€‚</p>
<p>spring sessionä¸»è¦æä¾›å¦‚ä¸‹èƒ½åŠ›ï¼š</p>
<ol>
<li>æŠŠsessionçš„å­˜å‚¨é€»è¾‘æŠ½å–å‡ºæ¥ï¼Œå¯ä»¥é€‰æ‹©rdisï¼Œæˆ–è€…è‡ªå·±å®ç°sessionå­˜å‚¨</li>
<li>ä½¿ç”¨websocketä¹Ÿèƒ½ä¿æŒä¼šè¯</li>
<li>éwebåº”ç”¨ä¹Ÿèƒ½ä½¿ç”¨ä¼šè¯</li>
<li>æ”¯æŒå¤šä¸ªsession(å¯ä»¥ç™»é™†å¤šä¸ªç”¨æˆ·)</li>
<li>Restful APIä¹Ÿèƒ½é€šè¿‡http headerç»´æŠ¤ä¼šè¯</li>
</ol>
<p>spring session 1.1ç‰ˆæœ¬æ”¯æŒ<code>HttpSessionListener</code>.å¦‚æœä½¿ç”¨çš„redisï¼Œspring sessioné€šè¿‡keyè¿‡æœŸæ—¶çš„è¿‡æœŸäº‹ä»¶+redisæ¶ˆæ¯æ¨é€æ¥å®ç°ã€‚å¯æƒœæˆ‘ä»¬ç”¨çš„æ˜¯<code>codis</code>ï¼Œæˆ‘ä»¬å®ç°äº†<code>DisabledRedisMessageListenerContainer</code>æŠŠè¿™ä¸ªèƒ½åŠ›å±è”½äº†ã€‚</p>
<p>æ›´å¤šå‚è€ƒï¼š<a href="http://docs.spring.io/spring-session/docs/current-SNAPSHOT/reference/html5/#introduction" target="_blank" rel="noopener">spring session å®˜æ–¹æ–‡æ¡£</a> <a href="https://github.com/spring-projects/spring-session/issues/4" target="_blank" rel="noopener">Add HttpSessionListener Support</a></p>
<h2 id="The-Twelve-Factor-App"><a href="#The-Twelve-Factor-App" class="headerlink" title="The Twelve-Factor App"></a><a name="the-twelve-factor-app">The Twelve-Factor App</a></h2><p><a href="http://12factor.net" target="_blank" rel="noopener">http://12factor.net</a></p>
<p>The twelve-factor app is a methodology for building software-as-a-service apps.</p>
<ol>
<li><p>Codebase:One codebase tracked in revision control, many deploys</p>
<p> one codebase per appï¼ˆall tracked in revision controlï¼‰, but there will be many deploys of the app(one or more staging use same code,use multi config file or configuration management system for different stage ). </p>
</li>
<li><p>Dependencies:Explicitly declare and isolate dependencies</p>
<p>  declares all dependencies via a dependency declaration manifest,and use dependencies check strategy to ensure that no implicit dependencies.</p>
</li>
<li><p>Config:Store config in the environment</p>
<p> use mutli config file ï¼ˆ<a href="http://bohr.me/env-aware/">build env-awared app</a>ï¼‰     or use configuration management system ï¼ˆ<a href="http://cloud.spring.io/spring-cloud-config/" target="_blank" rel="noopener">spring cloud config</a>ï¼‰</p>
</li>
<li><p>Backing Services:Treat backing services as attached resources</p>
<p> app makes no distinction between local and third party servicesï¼ˆboth are attached resourcesï¼‰. A deploy should be able to swap out a local MySQL database with one managed by a third party (such as Amazon RDS) without any changes to the appâ€™s code. </p>
</li>
<li><p>Build, release, run:Strictly separate build and run stages</p>
<p> app uses strict separation between the build, release, and run stages. For example, it is impossible to make changes to the code at runtime, since there is no way to propagate those changes back to the build stageï¼ˆwe can put dynamic part code into db ï¼‰.</p>
</li>
<li><p>Processes:Execute the app as one or more stateless processes</p>
<p> Twelve-factor processes are stateless and share-nothing. Any data that needs to persist must be stored in a stateful backing service, typically a database.Sticky sessions should never be used or relied upon. </p>
</li>
<li><p>Port binding:Export services via port binding</p>
<p> The twelve-factor app is completely self-contained and does not rely on runtime injection of a webserver into the execution environment to create a web-facing service. The web app exports HTTP as a service by binding to a port, and listening to requests coming in on that port.</p>
</li>
<li><p>Concurrency:Scale out via the process model</p>
<p>processes are a first class citizen.Processes in the twelve-factor app take strong cues from the unix process model for running service daemons. Using this model, the developer can architect their app to handle diverse workloads by assigning each type of work to a process type.</p>
</li>
<li><p>Disposability:Maximize robustness with fast startup and graceful shutdown</p>
<p> Processes should strive to minimize startup time.</p>
<p> Processes shut down gracefully ï¼ˆ ceasing to listen on the service port,thereby refusing any new requests, allowing any current requests to finish, and then exiting.ï¼‰when they receive a SIGTERM signal from the process manager.</p>
<p> For a worker process, graceful shutdown is achieved by <strong>returning the current job to the work queue</strong>.Implicit in this model is that all jobs are <strong>reentrant</strong>, which typically is achieved by wrapping the results in a transaction, or making the operation <code>idempotent</code>.</p>
<p> Processes should also be robust against sudden death, in the case of a failure in the underlying hardware.  A recommended approach is use of a robust queueing backend that returns jobs to the queue when clients disconnect or time out. Either way, a twelve-factor app is architected to handle unexpected, non-graceful terminations. </p>
</li>
<li><p>Dev/prod parity:Keep development, staging, and production as similar as possible</p>
</li>
</ol>
<pre><code>  x      | Traditional app           | Twelve-factor app     |
--------------------|------------------|-----------------------|
Time between deploys | Weeks   | Hours   |
Code authors vs code deployers  | Different people | Same people  |
Dev vs production environments  | Divergent | As similar as possible  |

The twelve-factor developer resists the urge to use different backing services between development and production, even when adapters theoretically abstract away any differences in backing services.
</code></pre><ol>
<li><p>Logs:Treat logs as event streams</p>
<p>A twelve-factor app never concerns itself with routing or storage of its output stream(maybe dont fit for java app).</p>
</li>
<li><p>Admin processes:Run admin/management tasks as one-off processes</p>
<p>One-off admin processes should be run in an identical environment as the regular long-running processes of the app. They run against a release, using the same codebase and config as any process run against that release. Admin code must ship with application code to avoid synchronization issues.</p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://bohr.me/2015-05-reading-notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="qiubo">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qiubo's life">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015-05-reading-notes/" itemprop="url">2015å¹´05æœˆReading Notes</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2015-05-01T21:52:17+08:00">
                2015-05-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="ä½¿ç”¨spring-loadedæé«˜å¼€å‘æ•ˆç‡"><a href="#ä½¿ç”¨spring-loadedæé«˜å¼€å‘æ•ˆç‡" class="headerlink" title="ä½¿ç”¨spring loadedæé«˜å¼€å‘æ•ˆç‡"></a><a name="springloaded">ä½¿ç”¨spring loadedæé«˜å¼€å‘æ•ˆç‡</a></h2><p><a href="https://github.com/spring-projects/spring-loaded" target="_blank" rel="noopener">spring-loaded</a>å’Œ<a href="http://zeroturnaround.com/software/jrebel/" target="_blank" rel="noopener">jrebel</a>ç±»ä¼¼ï¼Œå®ƒèƒ½å‘ç°æ‚¨ä¿®æ”¹çš„ç±»å¹¶é‡æ–°åŠ è½½ã€‚åœ¨å¼€å‘æµ‹è¯•æ—¶ï¼Œæ‚¨åªéœ€è¦ä½¿ç”¨å®ƒå¯åŠ¨åï¼Œå°±å¯ä»¥ä¸€ç›´å†™ä»£ç äº†ã€‚jrebelæ˜¯æ”¶è´¹çš„è½¯ä»¶ï¼Œspring-loadedå…è´¹ï¼Œè€Œä¸”ä»–å¾ˆäº†è§£æ‚¨ä»£ç ä¸­ç”¨åˆ°çš„springç‰¹æ€§ï¼Œèƒ½å¾ˆæ™ºèƒ½çš„å¸®å¿™é‡æ–°åŠ è½½ç±»ï¼Œå¹¶æŠŠbeanæ³¨å†Œåˆ°springå®¹å™¨ä¸­ã€‚</p>
<p>ä½¿ç”¨å¾ˆç®€å•ï¼Œå‚è€ƒä¸‹é¢çš„æ­¥éª¤ï¼š</p>
<ol>
<li>ä¸‹è½½<a href="http://repo.spring.io/simple/libs-release-local/org/springframework/springloaded/1.2.3.RELEASE/springloaded-1.2.3.RELEASE.jar" target="_blank" rel="noopener">springloaded</a></li>
<li><p>é…ç½®IDEA</p>
<ul>
<li>æ‰“å¼€<code>Run/Debug Configuations</code>,åœ¨<code>Defaults</code>ä¸­é€‰æ‹©<code>Application</code></li>
<li><p>åœ¨å³è¾¹çš„<code>Configuration</code> tabä¸­é…ç½®<code>VM options</code></p>
<pre><code>-javaagent:/Users/bohr/software/springloaded/springloaded-1.2.3.RELEASE.jar -noverify
</code></pre><p>æœ‰äº†æ­¤é»˜è®¤é…ç½®ï¼Œä¸€åŠ³æ°¸é€¸ã€‚ä¸Šé¢çš„è·¯å¾„åœ°å€ä¿®æ”¹ä¸ºæ‚¨ä¿å­˜springloadedçš„è·¯å¾„</p>
</li>
</ul>
</li>
<li>æ‰§è¡Œä»»ä½•javaç±»</li>
<li>ä¿®æ”¹åï¼Œç¼–è¯‘æ­¤javaç±»å°±èƒ½çœ‹åˆ°ä¿®æ”¹åçš„æ•ˆæœäº†ã€‚</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://bohr.me/2015-04-reading-notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="qiubo">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qiubo's life">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015-04-reading-notes/" itemprop="url">2015å¹´04æœˆReading Notes</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2015-04-01T21:52:17+08:00">
                2015-04-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Enterprise-Nashorn"><a href="#Enterprise-Nashorn" class="headerlink" title="Enterprise Nashorn"></a><a name="enterprise_nashorn">Enterprise Nashorn</a></h2><p><a href="https://community.oracle.com/docs/DOC-910779" target="_blank" rel="noopener">https://community.oracle.com/docs/DOC-910779</a></p>
<p>æœ¬æ–‡è®²è¿°äº†<code>Nashorn</code>çš„ä¸€äº›ä½¿ç”¨åœºæ™¯ï¼š</p>
<ol>
<li>ç”±å¤–éƒ¨æä¾›è®¡ç®—é€»è¾‘ï¼ŒæœåŠ¡ç«¯æ‰§è¡Œè®¡ç®—é€»è¾‘è¿”å›ç»“æœ</li>
<li>ç”¨javaæ¥å®šä¹‰æ¥å£ï¼Œjsæ¥å†™é€»è¾‘ï¼Œæ–¹ä¾¿åŠ¨æ€æ›´æ–°è®¡ç®—é€»è¾‘ã€‚(æ¯”å¦‚çŸ­ä¿¡ä¸­çš„è·¯ç”±ç­–ç•¥ï¼Œéœ€è¦ç»å¸¸æ›´æ–°)</li>
<li>å†™shellè„šæœ¬(è®¿é—®æ•°æ®åº“ï¼Œè®¿é—®ç½‘ç»œ,ç›‘æ§â€¦)</li>
</ol>
<p><code>Nashorn</code>çš„æ€§èƒ½æ¯”å‰ä»»å¼ºå¤šäº†ï¼Œä½†æ˜¯å’Œjavaæ¯”è¾ƒè¿˜æ˜¯æœ‰å·®è·ï¼Œä¸»è¦çš„æ€§èƒ½å¼€é”€åœ¨js-&gt;javaä¸Šã€‚åœ¨å…³æ³¨æ€§èƒ½çš„åœºæ™¯ï¼Œå¯ä»¥åœ¨ä¸šåŠ¡ä½¿ç”¨æ—¶ï¼Œé‡‡ç”¨æ–¹æ³•2ï¼Œå¹¶ç¼“å­˜proxyå¯¹è±¡ã€‚</p>
<pre><code>private static String isPrime = &quot; function test(num) {\n&quot; + &quot;if (num % 2 == 0)&quot; + &quot;return false;&quot; + &quot;for (var i = 3; i * i &lt;= num; i += 2)&quot;
                                    + &quot;if (num % i == 0)&quot; + &quot;return false;&quot; + &quot;return true;&quot; + &quot;}&quot;;
private Supplier&lt;Predicate&lt;Long&gt;&gt; supplier = Suppliers.memoize(() -&gt; getFilter());

private Predicate getFilter() {
    Invocable invocable = (Invocable) this.engine;
    try {
        this.engine.eval(isPrime);
        return invocable.getInterface(Predicate.class);
    } catch (Exception ex) {
        throw Throwables.propagate(ex);
    }
}
@Test
public void testJavaScriptWithMemoize() throws Exception {
    supplier.get().test(172673l);
}
</code></pre><p>å¯¹æ¯”äº†ä¸‹<code>nashorn</code>å’Œ<code>groovy</code>çš„æ€§èƒ½ï¼š</p>
<pre><code>NashornPerfTest.testJavaScript: [measured 50000 out of 51000 rounds, threads: 4 (all cores)]
 round: 0.00 [+- 0.00], round.block: 0.00 [+- 0.00], round.gc: 0.00 [+- 0.00], GC.calls: 96, GC.time: 0.25, time.total: 34.20, time.warmup: 3.44, time.bench: 30.76
NashornPerfTest.testJava: [measured 50000 out of 51000 rounds, threads: 4 (all cores)]
 round: 0.00 [+- 0.00], round.block: 0.00 [+- 0.00], round.gc: 0.00 [+- 0.00], GC.calls: 0, GC.time: 0.00, time.total: 0.28, time.warmup: 0.01, time.bench: 0.27
NashornPerfTest.testJavaScriptWithMemoize: [measured 50000 out of 51000 rounds, threads: 4 (all cores)]
 round: 0.00 [+- 0.00], round.block: 0.00 [+- 0.00], round.gc: 0.00 [+- 0.00], GC.calls: 0, GC.time: 0.00, time.total: 0.35, time.warmup: 0.06, time.bench: 0.29
GroovyTest.testGroovyWithMemoize: [measured 50000 out of 51000 rounds, threads: 4 (all cores)]
 round: 0.00 [+- 0.00], round.block: 0.00 [+- 0.00], round.gc: 0.00 [+- 0.00], GC.calls: 5, GC.time: 0.07, time.total: 3.86, time.warmup: 1.75, time.bench: 2.11
</code></pre><h2 id="spring-å¤šçº¿ç¨‹ä¸­ä¸¤ä¸ªäº‹åŠ¡æ‰§è¡Œé¡ºåºæ§åˆ¶"><a href="#spring-å¤šçº¿ç¨‹ä¸­ä¸¤ä¸ªäº‹åŠ¡æ‰§è¡Œé¡ºåºæ§åˆ¶" class="headerlink" title="spring å¤šçº¿ç¨‹ä¸­ä¸¤ä¸ªäº‹åŠ¡æ‰§è¡Œé¡ºåºæ§åˆ¶"></a>spring å¤šçº¿ç¨‹ä¸­ä¸¤ä¸ªäº‹åŠ¡æ‰§è¡Œé¡ºåºæ§åˆ¶</h2><p>æœ‰äº›åœºæ™¯éœ€è¦æ§åˆ¶ä¸¤ä¸ªäº‹åŠ¡çš„æ‰§è¡Œé¡ºåºï¼Œæ¯”å¦‚äº‹åŠ¡Aæ‰§è¡Œå®Œåï¼Œéœ€è¦äº‹åŠ¡Bä¸­æ‰§è¡Œè´¹æ—¶æ“ä½œã€‚å› ä¸ºæ˜¯è´¹æ—¶æ“ä½œï¼Œä¸€èˆ¬ä¼šæŠŠäº‹åŠ¡Bæ”¾åˆ°ç‹¬ç«‹çš„çº¿ç¨‹ä¸­æ‰§è¡Œã€‚ç„¶è€Œäº‹åŠ¡Aå’Œäº‹åŠ¡Båœ¨ä¸åŒçš„çº¿ç¨‹ä¸­ï¼Œäº‹åŠ¡Bè¿˜ä¼šä¾èµ–äº‹åŠ¡Aæäº¤çš„æ•°æ®ã€‚å¦‚æœåœ¨äº‹åŠ¡Aä¸­æ–°å¯åŠ¨çº¿ç¨‹æ‰§è¡Œäº‹åŠ¡Bï¼Œæœ‰å¯èƒ½äº‹åŠ¡Aè¿˜æ²¡æœ‰æäº¤ï¼Œå°±å¼€å§‹æ‰§è¡Œäº‹åŠ¡Bäº†ã€‚è¿™ç§åœºæ™¯éœ€è¦ä¿è¯äº‹åŠ¡Aæäº¤åï¼Œæ‰èƒ½åœ¨æ–°çº¿ç¨‹ä¸­æ‰§è¡Œäº‹åŠ¡Bã€‚</p>
<p>å¯ä»¥ä½¿ç”¨<code>TransactionSynchronizationManager</code>æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p>
<pre><code>TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronization(){
       void afterCommit(){
            //submit transaction B to threadpool
       }
})ï¼›
</code></pre><p>åœ¨äº‹åŠ¡Aä¸­åŠ ä¸Šæ­¤é’©å­ï¼Œåœ¨<code>afterCommit</code>æ–¹æ³•ä¸­å‘çº¿ç¨‹æ± æäº¤äº‹åŠ¡Aä»»åŠ¡ã€‚å…·ä½“å¤„ç†ä»£ç <code>AbstractPlatformTransactionManager#triggerAfterCommit</code>ï¼Œ<code>ThreadLocal</code>æ¸…ç†<code>AbstractPlatformTransactionManager#cleanupAfterCompletion</code>.</p>
<h2 id="Webåº”ç”¨çš„ç¼“å­˜è®¾è®¡æ¨¡å¼"><a href="#Webåº”ç”¨çš„ç¼“å­˜è®¾è®¡æ¨¡å¼" class="headerlink" title="Webåº”ç”¨çš„ç¼“å­˜è®¾è®¡æ¨¡å¼"></a>Webåº”ç”¨çš„ç¼“å­˜è®¾è®¡æ¨¡å¼</h2><p><a href="">http://robbinfan.com/blog/38/orm-cache-sumup</a></p>
<p>robbinå¤§å“¥è®²è§£äº†å¯¹<code>ORM</code>ç¼“å­˜çš„ç†è§£.æˆ‘å¸ä¹Ÿæœ‰ä¸å°‘é¡¹ç›®ç”¨äº†<code>ORM</code>,å¤§å¤šæ•°äººæ²¡æœ‰ä½¿ç”¨ç¼“å­˜çš„æ„è¯†,æœ‰è¿™æ ·æ„è¯†çš„åŒå­¦æåˆ°è¿‡ç”¨<code>ehcache</code>,è¿™åœ¨å•èŠ‚ç‚¹çš„æƒ…å†µä¸‹ï¼Œå·¥ä½œå¾—å¾ˆå¥½ï¼Œä½†æ˜¯åˆ°äº†çº¿ä¸Šå¤šæœºéƒ¨ç½²ï¼Œæ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜å°±ä¼šå‡ºç°ï¼Œè‡³å°‘ä¹Ÿè¦é€‰ç”¨åˆ†å¸ƒå¼ç¼“å­˜ç³»ç»Ÿæ¥å®ç°å“ˆã€‚è¿˜æœ‰ä¸€ç‚¹ï¼Œå› ä¸ºæœ‰äº†ç¼“å­˜ï¼Œæ•°æ®è®¢æ­£è¿™ç§äº‹æƒ…å°±è¦è°¨æ…äº†ã€‚</p>
<h2 id="javaåå°„çš„æ€§èƒ½"><a href="#javaåå°„çš„æ€§èƒ½" class="headerlink" title="javaåå°„çš„æ€§èƒ½"></a><a name="java_reflect">javaåå°„çš„æ€§èƒ½</a></h2><p>å…ˆçœ‹çœ‹ä¸‹é¢çš„æ•°æ®ï¼š</p>
<pre><code>Benchmark                                  Mode  Cnt     Score    Error  Units
 testInvokeMethod_Direct                avgt   20     0.587 Â±  0.036  ns/op
 testInvokeMethod_Reflectasm            avgt   20    39.940 Â±  1.957  ns/op
 testInvokeMethod_Reflectasm_withCache  avgt   20     9.784 Â±  0.745  ns/op
 testInvokeMethod_reflect               avgt   20  1513.409 Â± 85.396  ns/op
 testInvokeMethod_reflect_withCache     avgt   20    29.444 Â±  1.863  ns/op
</code></pre><p>ä¸Šé¢çš„æ•°æ®æµ‹è¯•äº†<code>ç›´æ¥è°ƒç”¨javaæ–¹æ³•</code>ã€<code>é€šè¿‡åå°„è°ƒç”¨java</code>ã€<code>é€šè¿‡ReflectASMè°ƒç”¨java</code>ï¼Œ<code>withCache</code>æ„æ€æ˜¯æŠŠä¸­é—´å¯¹è±¡ç¼“å­˜èµ·æ¥ã€‚<br>åå°„ç¡®å®å¾ˆæ…¢ï¼Œä½†æ˜¯åªè¦æŠŠåå°„å¯¹è±¡ç¼“å­˜èµ·æ¥ï¼Œæ€§èƒ½æå‡å¾ˆå¤§ï¼Œ<code>Reflectasm_withCache</code>æ¯”<code>reflect_withCache</code>å¿«äº†3å€å¤šã€‚</p>
<p><code>Reflectasm</code>çš„åŸç†æ˜¯ç”Ÿæˆjavaæºä»£ç æ¥å®ç°åå°„çš„è°ƒç”¨ï¼Œä¸‹é¢å°±æ˜¯ç”Ÿæˆçš„æºä»£ç ã€‚</p>
<pre><code>package reflectasm;
import java.util.Map;
import com.esotericsoftware.reflectasm.MethodAccess;
public class PojoMethodAccess extends MethodAccess {
    public Object invoke(Object paramObject, int paramInt, Object[] paramArrayOfObject) {
        Pojo localPojo = (Pojo) paramObject;
        switch (paramInt) {
            case 0:
                return Boolean.valueOf(localPojo.equals((Object) paramArrayOfObject[0]));
            case 1:
                return localPojo.toString();
            case 2:
                return Integer.valueOf(localPojo.hashCode());
            case 3:
                return localPojo.getName();
            case 4:
                localPojo.setName((String) paramArrayOfObject[0]);
                return null;
        }
        throw new IllegalArgumentException(&quot;Method not found: &quot; + paramInt);
    }
}
</code></pre><p>è¡¥å……:</p>
<p>â€“</p>
<pre><code>ROUND 1:
Benchmark                           Mode  Cnt   Score   Error  Units
 MHOpto.mh_invoke                    avgt   15  11.332 Â± 0.577  ns/op
 MHOpto.mh_invokeExact               avgt   15  10.605 Â± 0.667  ns/op
 MHOpto.mh_invokeExact_static_fianl  avgt   15   3.797 Â± 0.201  ns/op
 MHOpto.plain                        avgt   15   4.093 Â± 0.156  ns/op
 MHOpto.reflect                      avgt   15  11.599 Â± 0.646  ns/op
 MHOpto.unreflect_invoke             avgt   15  11.147 Â± 0.743  ns/op
 MHOpto.unreflect_invokeExact        avgt   15  11.392 Â± 0.518  ns/op

 ROUND 2:
 Benchmark                           Mode  Cnt   Score   Error  Units
MHOpto.mh_invoke                    avgt   15  11.799 Â± 0.847  ns/op
MHOpto.mh_invokeExact               avgt   15  11.830 Â± 0.637  ns/op
MHOpto.mh_invokeExact_static_fianl  avgt   15   4.415 Â± 0.191  ns/op
MHOpto.plain                        avgt   15   4.084 Â± 0.300  ns/op
MHOpto.reflect                      avgt   15  12.191 Â± 0.637  ns/op
MHOpto.unreflect_invoke             avgt   15  11.535 Â± 0.816  ns/op
MHOpto.unreflect_invokeExact        avgt   15  11.828 Â± 0.666  ns/op
</code></pre><p><code>MethodHandle</code>å¤ªç‰›å‰äº†ã€‚</p>
<h2 id="spring-mvcçš„å¼‚æ­¥servletå®ç°"><a href="#spring-mvcçš„å¼‚æ­¥servletå®ç°" class="headerlink" title="spring mvcçš„å¼‚æ­¥servletå®ç°"></a><a name="spring_async_servelt">spring mvcçš„å¼‚æ­¥servletå®ç°</a></h2><p>springå¼‚æ­¥webå¤„ç†æµç¨‹ï¼Œæˆ‘ä»¬å…ˆä»¥<code>Controller</code>æ–¹æ³•è¿”å›<code>Callable</code>å¯¹è±¡ä¸ºä¾‹</p>
<ol>
<li>httpçº¿ç¨‹å¤„ç†è¯·æ±‚åˆ°Controlleræ–¹æ³•ï¼Œè¿”å›Callableç»“æœ</li>
<li>springé€‰ç”¨<code>CallableMethodReturnValueHandler</code>æ¥å¤„ç†Callableç»“æœï¼Œæäº¤Callableåˆ°çº¿ç¨‹æ± ï¼Œå½“å‰httpçº¿ç¨‹è¿”å›,å‚è€ƒ<code>WebAsyncManager.startCallableProcessing()</code></li>
<li>çº¿ç¨‹æ± ä¸­çº¿ç¨‹æ‰§è¡Œ<code>Callable</code>ä»»åŠ¡ï¼Œå¹¶ä¸”<code>dispatch</code>è¯·æ±‚åˆ°å®¹å™¨ï¼Œå‚è€ƒ<code>WebAsyncManager.setConcurrentResultAndDispatch()</code></li>
<li>å®¹å™¨é€‰å–httpçº¿ç¨‹ç»§ç»­å¤„ç†è¯·æ±‚</li>
</ol>
<p>é€šè¿‡åˆ†ææºä»£ç ï¼Œä¸‹é¢å‡ ç‚¹éœ€è¦å…³æ³¨ä¸‹ï¼š</p>
<ol>
<li><p><strong>dispatchè¯·æ±‚åï¼Œåˆä¼šæ‰§è¡Œfilterchain</strong>ï¼Œæˆ‘ä»¬éœ€è¦ä¿è¯filteråªæ‰§è¡Œä¸€æ¬¡ï¼Œfilteræœ€å¥½ç»§æ‰¿<code>OncePerRequestFilter</code>ã€‚</p>
</li>
<li><p>springå†…ç½®äº†å‡ ç§å¼‚æ­¥ç»“æœå¤„ç†å™¨ï¼Œ<code>CallableMethodReturnValueHandler</code>ã€<code>AsyncTaskMethodReturnValueHandler</code>ã€<code>DeferredResultMethodReturnValueHandler</code>åˆ†åˆ«æ”¯æŒæ–¹æ³•è¿”å›<code>Callable</code>,<code>WebAsyncTask</code>,<code>DeferredResult</code>ã€‚</p>
</li>
<li><p><code>org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter#taskExecutor</code>æ­¤é»˜è®¤çº¿ç¨‹æ± ä¸º<code>SimpleAsyncTaskExecutor</code>ï¼Œæ­¤<code>taskExecutor</code>æ¯æ¬¡éƒ½ä¼šéƒ½ä¼šæ–°å»ºçº¿ç¨‹æ¥å¤„ç†ä»»åŠ¡ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®å•ç‹¬é…ç½®çº¿ç¨‹æ± ã€‚</p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://bohr.me/2015-03-reading-notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="qiubo">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qiubo's life">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015-03-reading-notes/" itemprop="url">2015å¹´03æœˆReading Notes</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2015-03-02T21:52:17+08:00">
                2015-03-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="The-Asset-Pipeline"><a href="#The-Asset-Pipeline" class="headerlink" title="The Asset Pipeline"></a>The Asset Pipeline</h2><p><a href="http://guides.rubyonrails.org/asset_pipeline.html" target="_blank" rel="noopener">http://guides.rubyonrails.org/asset_pipeline.html</a></p>
<p><code>Asset Pipeline</code>å¯¹ç½‘ç«™çš„é™æ€èµ„æºè¿›è¡Œé¢„å¤„ç†(åˆå¹¶ã€ç®€åŒ–ã€å‹ç¼©ã€é¢„å¤„ç†coffeescirpt sassç­‰)ã€‚å¯¹äºé™æ€èµ„æºçš„å¤„ç†ï¼Œè¿™é‡Œé¢æåˆ°çš„<code>Fingerprinting</code>æ¥ä¼˜åŒ–http ç¼“å­˜å¯ä»¥å€Ÿé‰´ä¸‹ã€‚</p>
<p><code>Fingerprinting</code>æŠ€æœ¯æ˜¯åœ¨æ–‡ä»¶åä¸­åŠ ä¸Šæ–‡ä»¶å†…å®¹çš„æ ‡è¯†ï¼Œå½“æ–‡ä»¶å†…å®¹æ”¹å˜æ—¶ï¼Œæ–‡ä»¶åä¹Ÿæ”¹å˜ã€‚æ¯”å¦‚æ–‡ä»¶<code>global.css</code>åŠ å…¥md5çš„æŒ‡çº¹åï¼Œæ–‡ä»¶åä¸º<code>global-908e25f4bf641868d8683022a5b62f54.css</code>.</p>
<p>ä»¥å‰æˆ‘ä»¬ç»å¸¸ç”¨<code>query string</code>ä¸­æ¥æ ‡è¯†ç‰ˆæœ¬ï¼Œæ¯”å¦‚<code>main.js?1.4</code>/<code>main.js?v=1.4</code>.è¿™ç§æ–¹å¼åœ¨æŸäº›CDNä¸­æœ‰é—®é¢˜(æœ‰äº›CDNåªè¯†åˆ«æ–‡ä»¶åï¼Œæ–°çš„ç‰ˆæœ¬æ–‡ä»¶ä¼šæ›¿æ¢åŸç‰ˆæœ¬çš„æ–‡ä»¶ï¼Œåœ¨éƒ¨ç½²è¿™ä¸ªæ—¶é—´çª—å£ä¼šå¯¼è‡´é¡µé¢æ··ä¹±)ã€‚</p>
<p>åœ¨ä½¿ç”¨æµè§ˆå™¨ç¼“å­˜æ—¶ï¼Œä¸€èˆ¬æ¶‰åŠåˆ°http headeråŒ…æ‹¬ä¸‹é¢ä¸¤ç§æ–¹æ¡ˆ:</p>
<ol>
<li><code>Expires</code>å’Œ<code>Cache-Control: max-age</code> (æ²¡æœ‰è¿‡æœŸä¹‹å‰ï¼Œå®Œå…¨ä¸å‘é€è¯·æ±‚)</li>
<li><code>Last-Modifed</code>å’Œ<code>ETag</code> (å†…å®¹åå•†ï¼Œéœ€è¦å‘ä¸€ä¸ªè¯·æ±‚ï¼Œå¦‚æœå†…å®¹æ²¡æœ‰å˜åŒ–ï¼Œå“åº”304)</li>
</ol>
<p>å½“æ–¹æ¡ˆ2å’Œ<code>Fingerprinting</code>ç»“åˆèµ·æ¥æ—¶ï¼Œå°±æ¯”è¾ƒå®Œç¾äº†ã€‚å¯¹äºç°åœ¨å¾ˆå¤šå¼€æ”¾CDNæ¥è®²ï¼ŒåŸºæœ¬ä¸Šéƒ½ä¼šç”¨æ–¹æ¡ˆ1ï¼Œè¿™æ˜¯å¼€æºåº“åå­—é‡Œé¢çš„ç‰ˆæœ¬å·å°±èµ·ç€<code>Fingerprinting</code>çš„ä½œç”¨ã€‚ä¹Ÿæœ‰ç”¨æ–¹æ¡ˆ2çš„ï¼Œä¼°è®¡æ˜¯å‡ºäºç»Ÿè®¡åˆ†æçš„ç›®çš„ã€‚</p>
<p>å¯¹äºé™æ€èµ„æºçš„ç¼“å­˜ï¼Œç†æƒ³çš„ç»„åˆæ˜¯ï¼š</p>
<ol>
<li>é…ç½®å¾ˆé•¿çš„æœ¬åœ°ç¼“å­˜æ—¶é—´(å–„ç”¨<code>Expires</code>å’Œ<code>Cache-Control: max-age</code>)ï¼Œæ¯”å¦‚1å¹´</li>
<li>é€šè¿‡<code>Fingerprinting</code>æ§åˆ¶ç¼“å­˜(é™æ€èµ„æºæ–‡ä»¶æ”¹å˜ï¼Œå¯¹åº”çš„htmlçš„èµ„æºå¼•ç”¨urlä¹Ÿæ”¹å˜)</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://bohr.me/2015-02-reading-notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="qiubo">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qiubo's life">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015-02-reading-notes/" itemprop="url">2015å¹´02æœˆReading Notes</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2015-02-16T21:52:17+08:00">
                2015-02-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Java-Lambdas-and-Low-Latency"><a href="#Java-Lambdas-and-Low-Latency" class="headerlink" title="Java Lambdas and Low Latency"></a>Java Lambdas and Low Latency</h2><p><a href="http://vanillajava.blogspot.hk/2015/01/java-lambdas-and-low-latency.html" target="_blank" rel="noopener">http://vanillajava.blogspot.hk/2015/01/java-lambdas-and-low-latency.html</a></p>
<p> <code>Lambdas</code>åˆ›å»ºäº†æ–°å¯¹è±¡ï¼Œåœ¨ä½å»¶è¿Ÿåº”ç”¨ä¸­ä¼šç»™<code>gc</code>å¸¦æ¥ä¸€ç‚¹ç‚¹å‹åŠ›ã€‚<a href="http://docs.oracle.com/javase/7/docs/technotes/guides/vm/performance-enhancements-7.html" target="_blank" rel="noopener">Escape Analysis</a>(åˆ†æå¯¹è±¡çš„ä½¿ç”¨èŒƒå›´ï¼Œæ¥åšæ€§èƒ½ä¼˜åŒ–ï¼Œæ¯”å¦‚é”æ¶ˆé™¤ï¼Œæ¶ˆé™¤å¯¹è±¡åˆ†é…â€¦)èƒ½å‡å°‘è¿™ç§å‹åŠ›ã€‚å¯ä»¥é€šè¿‡jvmå‚è€ƒ<code>-XX:BCEATraceLevel=3</code>æŸ¥çœ‹é€ƒé€¸åˆ†ææƒ…å†µï¼Œè¿›ä¸€æ­¥è®¾ç½®<code>-XX:MaxBCEAEstimateSize</code>æ¥è°ƒæ•´<code>Maximum bytecode size of a method to be analyzed by BC EA.</code></p>
<h2 id="Catch-common-Java-mistakes-as-compile-time-errors"><a href="#Catch-common-Java-mistakes-as-compile-time-errors" class="headerlink" title="Catch common Java mistakes as compile-time errors"></a>Catch common Java mistakes as compile-time errors</h2><p><a href="http://errorprone.info/" target="_blank" rel="noopener">http://errorprone.info/</a></p>
<p>é™æ€ä»£ç åˆ†æå·¥å…·åˆæ·»ä¸€å‘˜ï¼Œåœ¨ç¼–è¯‘æ—¶æ£€æŸ¥å¸¸è§çš„javaä»£ç é”™è¯¯ã€‚åœ¨jdk8ä¸‹è²Œä¼¼runä¸èµ·æ¥ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://bohr.me/google-java-style/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="qiubo">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qiubo's life">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/google-java-style/" itemprop="url">Google Javaç¼–ç¨‹é£æ ¼æŒ‡å—</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2015-02-02T21:52:17+08:00">
                2015-02-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ä½œè€…ï¼šHawstein</p>
<p>å‡ºå¤„ï¼š<a href="http://hawstein.com/posts/google-java-style.html" target="_blank" rel="noopener">http://hawstein.com/posts/google-java-style.html</a></p>
<p>è½¬è½½è¯´æ˜ï¼šNä¸ªæœˆå‰çœ‹åˆ°<a href="http://google-styleguide.googlecode.com/svn/trunk/javaguide.html" target="_blank" rel="noopener">Google Java Style</a>,å¤§è‡´æ‰«äº†ä¸‹ï¼Œè‡ªè®¤ä¸ºå‘½åéƒ½æ¯”è¾ƒè§„èŒƒäº†ã€‚ä»Šå¤©åœ¨æ•´ç†ä¾èµ–æ—¶ï¼Œçœ‹åˆ°junitæœ€æ–°ç‰ˆæœ¬çš„release noteä¸­æåˆ°junitçš„ä»£ç æŒ‰ç…§<a href="http://google-styleguide.googlecode.com/svn/trunk/javaguide.html" target="_blank" rel="noopener">Google Java Style</a> fixäº†ä¸€éã€‚æ— æ„ä¸­æ„Ÿè§‰å¯èƒ½æˆ‘ä¹Ÿåšå¾—ä¸å¤Ÿå¥½ï¼Œä»”ç»†çœ‹çœ‹æ–‡æ¡£ï¼Œå‘ç°æœ‰ä¸ªåœ°æ–¹å†™çš„éå¸¸æ˜ç¡®ï¼Œå€¼å¾—å‚è€ƒã€‚è½¬è½½è¿™ç¯‡ä¸­æ–‡ç¿»è¯‘æ–‡ç« æ–¹ä¾¿å¤§å®¶æŸ¥çœ‹ã€‚</p>
<h2 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h2><ol>
<li><a href="#Intro">å‰è¨€</a></li>
<li><a href="#SFBasic">æºæ–‡ä»¶åŸºç¡€</a></li>
<li><a href="#SFStruct">æºæ–‡ä»¶ç»“æ„</a></li>
<li><a href="#Format">æ ¼å¼</a></li>
<li><a href="#Naming">å‘½åçº¦å®š</a></li>
<li><a href="#Practice">ç¼–ç¨‹å®è·µ</a></li>
<li><a href="#Javadoc">Javadoc</a></li>
<li><a href="#End">åè®°</a></li>
</ol>
<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a><a id="Intro">å‰è¨€</a></h2><p>è¿™ä»½æ–‡æ¡£æ˜¯Google Javaç¼–ç¨‹é£æ ¼è§„èŒƒçš„å®Œæ•´å®šä¹‰ã€‚å½“ä¸”ä»…å½“ä¸€ä¸ªJavaæºæ–‡ä»¶ç¬¦åˆæ­¤æ–‡æ¡£ä¸­çš„è§„åˆ™ï¼Œ<br>æˆ‘ä»¬æ‰è®¤ä¸ºå®ƒç¬¦åˆGoogleçš„Javaç¼–ç¨‹é£æ ¼ã€‚</p>
<p>ä¸å…¶å®ƒçš„ç¼–ç¨‹é£æ ¼æŒ‡å—ä¸€æ ·ï¼Œè¿™é‡Œæ‰€è®¨è®ºçš„ä¸ä»…ä»…æ˜¯ç¼–ç æ ¼å¼ç¾ä¸ç¾è§‚çš„é—®é¢˜ï¼Œ<br>åŒæ—¶ä¹Ÿè®¨è®ºä¸€äº›çº¦å®šåŠç¼–ç æ ‡å‡†ã€‚ç„¶è€Œï¼Œè¿™ä»½æ–‡æ¡£ä¸»è¦ä¾§é‡äºæˆ‘ä»¬æ‰€æ™®ééµå¾ªçš„è§„åˆ™ï¼Œ<br>å¯¹äºé‚£äº›ä¸æ˜¯æ˜ç¡®å¼ºåˆ¶è¦æ±‚çš„ï¼Œæˆ‘ä»¬å°½é‡é¿å…æä¾›æ„è§ã€‚</p>
<h3 id="1-1-æœ¯è¯­è¯´æ˜"><a href="#1-1-æœ¯è¯­è¯´æ˜" class="headerlink" title="1.1 æœ¯è¯­è¯´æ˜"></a>1.1 æœ¯è¯­è¯´æ˜</h3><p>åœ¨æœ¬æ–‡æ¡£ä¸­ï¼Œé™¤éå¦æœ‰è¯´æ˜ï¼š</p>
<ol>
<li>æœ¯è¯­classå¯è¡¨ç¤ºä¸€ä¸ªæ™®é€šç±»ï¼Œæšä¸¾ç±»ï¼Œæ¥å£æˆ–æ˜¯annotationç±»å‹(<code>@interface</code>)</li>
<li>æœ¯è¯­commentåªç”¨æ¥æŒ‡ä»£å®ç°çš„æ³¨é‡Š(implementation comments)ï¼Œæˆ‘ä»¬ä¸ä½¿ç”¨â€œdocumentation commentsâ€ä¸€è¯ï¼Œè€Œæ˜¯ç”¨Javadocã€‚</li>
</ol>
<p>å…¶ä»–çš„æœ¯è¯­è¯´æ˜ä¼šå¶å°”åœ¨åé¢çš„æ–‡æ¡£å‡ºç°ã€‚</p>
<h3 id="1-2-æŒ‡å—è¯´æ˜"><a href="#1-2-æŒ‡å—è¯´æ˜" class="headerlink" title="1.2 æŒ‡å—è¯´æ˜"></a>1.2 æŒ‡å—è¯´æ˜</h3><p>æœ¬æ–‡æ¡£ä¸­çš„ç¤ºä¾‹ä»£ç å¹¶ä¸ä½œä¸ºè§„èŒƒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè™½ç„¶ç¤ºä¾‹ä»£ç æ˜¯éµå¾ªGoogleç¼–ç¨‹é£æ ¼ï¼Œä½†å¹¶ä¸æ„å‘³ç€è¿™æ˜¯å±•ç°è¿™äº›ä»£ç çš„å”¯ä¸€æ–¹å¼ã€‚<br>ç¤ºä¾‹ä¸­çš„æ ¼å¼é€‰æ‹©ä¸åº”è¯¥è¢«å¼ºåˆ¶å®šä¸ºè§„åˆ™ã€‚</p>
<h2 id="æºæ–‡ä»¶åŸºç¡€"><a href="#æºæ–‡ä»¶åŸºç¡€" class="headerlink" title="æºæ–‡ä»¶åŸºç¡€"></a><a id="SFBasic">æºæ–‡ä»¶åŸºç¡€</a></h2><h3 id="2-1-æ–‡ä»¶å"><a href="#2-1-æ–‡ä»¶å" class="headerlink" title="2.1 æ–‡ä»¶å"></a>2.1 æ–‡ä»¶å</h3><p>æºæ–‡ä»¶ä»¥å…¶æœ€é¡¶å±‚çš„ç±»åæ¥å‘½åï¼Œå¤§å°å†™æ•æ„Ÿï¼Œæ–‡ä»¶æ‰©å±•åä¸º<code>.java</code>ã€‚</p>
<h3 id="2-2-æ–‡ä»¶ç¼–ç ï¼šUTF-8"><a href="#2-2-æ–‡ä»¶ç¼–ç ï¼šUTF-8" class="headerlink" title="2.2 æ–‡ä»¶ç¼–ç ï¼šUTF-8"></a>2.2 æ–‡ä»¶ç¼–ç ï¼šUTF-8</h3><p>æºæ–‡ä»¶ç¼–ç æ ¼å¼ä¸ºUTF-8ã€‚</p>
<h3 id="2-3-ç‰¹æ®Šå­—ç¬¦"><a href="#2-3-ç‰¹æ®Šå­—ç¬¦" class="headerlink" title="2.3 ç‰¹æ®Šå­—ç¬¦"></a>2.3 ç‰¹æ®Šå­—ç¬¦</h3><h4 id="2-3-1-ç©ºç™½å­—ç¬¦"><a href="#2-3-1-ç©ºç™½å­—ç¬¦" class="headerlink" title="2.3.1 ç©ºç™½å­—ç¬¦"></a>2.3.1 ç©ºç™½å­—ç¬¦</h4><p>é™¤äº†è¡Œç»“æŸç¬¦åºåˆ—ï¼ŒASCIIæ°´å¹³ç©ºæ ¼å­—ç¬¦(0x20ï¼Œå³ç©ºæ ¼)æ˜¯æºæ–‡ä»¶ä¸­å”¯ä¸€å…è®¸å‡ºç°çš„ç©ºç™½å­—ç¬¦ï¼Œè¿™æ„å‘³ç€ï¼š</p>
<ol>
<li>æ‰€æœ‰å…¶å®ƒå­—ç¬¦ä¸²ä¸­çš„ç©ºç™½å­—ç¬¦éƒ½è¦è¿›è¡Œè½¬ä¹‰ã€‚</li>
<li>åˆ¶è¡¨ç¬¦ä¸ç”¨äºç¼©è¿›ã€‚</li>
</ol>
<h4 id="2-3-2-ç‰¹æ®Šè½¬ä¹‰åºåˆ—"><a href="#2-3-2-ç‰¹æ®Šè½¬ä¹‰åºåˆ—" class="headerlink" title="2.3.2 ç‰¹æ®Šè½¬ä¹‰åºåˆ—"></a>2.3.2 ç‰¹æ®Šè½¬ä¹‰åºåˆ—</h4><p>å¯¹äºå…·æœ‰ç‰¹æ®Š<a href="http://zh.wikipedia.org/wiki/%E8%BD%AC%E4%B9%89%E5%BA%8F%E5%88%97" target="_blank" rel="noopener">è½¬ä¹‰åºåˆ—</a>çš„ä»»ä½•å­—ç¬¦(\b, \t, \n, \f, \r, \â€, \â€™åŠ\)ï¼Œæˆ‘ä»¬ä½¿ç”¨å®ƒçš„è½¬ä¹‰åºåˆ—ï¼Œè€Œä¸æ˜¯ç›¸åº”çš„å…«è¿›åˆ¶(æ¯”å¦‚<code>\012</code>)æˆ–Unicode(æ¯”å¦‚<code>\u000a</code>)è½¬ä¹‰ã€‚</p>
<h4 id="2-3-3-éASCIIå­—ç¬¦"><a href="#2-3-3-éASCIIå­—ç¬¦" class="headerlink" title="2.3.3 éASCIIå­—ç¬¦"></a>2.3.3 éASCIIå­—ç¬¦</h4><p>å¯¹äºå‰©ä½™çš„éASCIIå­—ç¬¦ï¼Œæ˜¯ä½¿ç”¨å®é™…çš„Unicodeå­—ç¬¦(æ¯”å¦‚âˆ)ï¼Œè¿˜æ˜¯ä½¿ç”¨ç­‰ä»·çš„Unicodeè½¬ä¹‰ç¬¦(æ¯”å¦‚\u221e)ï¼Œå–å†³äºå“ªä¸ªèƒ½è®©ä»£ç æ›´æ˜“äºé˜…è¯»å’Œç†è§£ã€‚</p>
<blockquote>
<blockquote>
<p>Tip: åœ¨ä½¿ç”¨Unicodeè½¬ä¹‰ç¬¦æˆ–æ˜¯ä¸€äº›å®é™…çš„Unicodeå­—ç¬¦æ—¶ï¼Œå»ºè®®åšäº›æ³¨é‡Šç»™å‡ºè§£é‡Šï¼Œè¿™æœ‰åŠ©äºåˆ«äººé˜…è¯»å’Œç†è§£ã€‚</p>
</blockquote>
</blockquote>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code>String unitAbbrev = &quot;Î¼s&quot;;                                 | èµï¼Œå³ä½¿æ²¡æœ‰æ³¨é‡Šä¹Ÿéå¸¸æ¸…æ™°
String unitAbbrev = &quot;\u03bcs&quot;; // &quot;Î¼s&quot;                    | å…è®¸ï¼Œä½†æ²¡æœ‰ç†ç”±è¦è¿™æ ·åš
String unitAbbrev = &quot;\u03bcs&quot;; // Greek letter mu, &quot;s&quot;    | å…è®¸ï¼Œä½†è¿™æ ·åšæ˜¾å¾—ç¬¨æ‹™è¿˜å®¹æ˜“å‡ºé”™
String unitAbbrev = &quot;\u03bcs&quot;;                            | å¾ˆç³Ÿï¼Œè¯»è€…æ ¹æœ¬çœ‹ä¸å‡ºè¿™æ˜¯ä»€ä¹ˆ
return &apos;\ufeff&apos; + content; // byte order mark             | Goodï¼Œå¯¹äºéæ‰“å°å­—ç¬¦ï¼Œä½¿ç”¨è½¬ä¹‰ï¼Œå¹¶åœ¨å¿…è¦æ—¶å†™ä¸Šæ³¨é‡Š
</code></pre><blockquote>
<blockquote>
<p>Tip: æ°¸è¿œä¸è¦ç”±äºå®³æ€•æŸäº›ç¨‹åºå¯èƒ½æ— æ³•æ­£ç¡®å¤„ç†éASCIIå­—ç¬¦è€Œè®©ä½ çš„ä»£ç å¯è¯»æ€§å˜å·®ã€‚å½“ç¨‹åºæ— æ³•æ­£ç¡®å¤„ç†éASCIIå­—ç¬¦æ—¶ï¼Œå®ƒè‡ªç„¶æ— æ³•æ­£ç¡®è¿è¡Œï¼Œ<br>ä½ å°±ä¼šå»fixè¿™äº›é—®é¢˜çš„äº†ã€‚(è¨€ä¸‹ä¹‹æ„å°±æ˜¯å¤§èƒ†å»ç”¨éASCIIå­—ç¬¦ï¼Œå¦‚æœçœŸçš„æœ‰éœ€è¦çš„è¯)</p>
</blockquote>
</blockquote>
<h2 id="æºæ–‡ä»¶ç»“æ„"><a href="#æºæ–‡ä»¶ç»“æ„" class="headerlink" title="æºæ–‡ä»¶ç»“æ„"></a><a id="SFStruct">æºæ–‡ä»¶ç»“æ„</a></h2><p>ä¸€ä¸ªæºæ–‡ä»¶åŒ…å«(æŒ‰é¡ºåºåœ°)ï¼š</p>
<ol>
<li>è®¸å¯è¯æˆ–ç‰ˆæƒä¿¡æ¯(å¦‚æœ‰éœ€è¦)</li>
<li>packageè¯­å¥</li>
<li>importè¯­å¥</li>
<li>ä¸€ä¸ªé¡¶çº§ç±»(<strong>åªæœ‰ä¸€ä¸ª</strong>)</li>
</ol>
<p>ä»¥ä¸Šæ¯ä¸ªéƒ¨åˆ†ä¹‹é—´ç”¨ä¸€ä¸ªç©ºè¡Œéš”å¼€ã€‚</p>
<h3 id="3-1-è®¸å¯è¯æˆ–ç‰ˆæƒä¿¡æ¯"><a href="#3-1-è®¸å¯è¯æˆ–ç‰ˆæƒä¿¡æ¯" class="headerlink" title="3.1 è®¸å¯è¯æˆ–ç‰ˆæƒä¿¡æ¯"></a>3.1 è®¸å¯è¯æˆ–ç‰ˆæƒä¿¡æ¯</h3><p>å¦‚æœä¸€ä¸ªæ–‡ä»¶åŒ…å«è®¸å¯è¯æˆ–ç‰ˆæƒä¿¡æ¯ï¼Œé‚£ä¹ˆå®ƒåº”å½“è¢«æ”¾åœ¨æ–‡ä»¶æœ€å‰é¢ã€‚</p>
<h3 id="3-2-packageè¯­å¥"><a href="#3-2-packageè¯­å¥" class="headerlink" title="3.2 packageè¯­å¥"></a>3.2 packageè¯­å¥</h3><p>packageè¯­å¥ä¸æ¢è¡Œï¼Œåˆ—é™åˆ¶(4.4èŠ‚)å¹¶ä¸é€‚ç”¨äºpackageè¯­å¥ã€‚(å³packageè¯­å¥å†™åœ¨ä¸€è¡Œé‡Œ)</p>
<h3 id="3-3-importè¯­å¥"><a href="#3-3-importè¯­å¥" class="headerlink" title="3.3 importè¯­å¥"></a>3.3 importè¯­å¥</h3><h4 id="3-3-1-importä¸è¦ä½¿ç”¨é€šé…ç¬¦"><a href="#3-3-1-importä¸è¦ä½¿ç”¨é€šé…ç¬¦" class="headerlink" title="3.3.1 importä¸è¦ä½¿ç”¨é€šé…ç¬¦"></a>3.3.1 importä¸è¦ä½¿ç”¨é€šé…ç¬¦</h4><p>å³ï¼Œä¸è¦å‡ºç°ç±»ä¼¼è¿™æ ·çš„importè¯­å¥ï¼š<code>import java.util.*;</code></p>
<h4 id="3-3-2-ä¸è¦æ¢è¡Œ"><a href="#3-3-2-ä¸è¦æ¢è¡Œ" class="headerlink" title="3.3.2 ä¸è¦æ¢è¡Œ"></a>3.3.2 ä¸è¦æ¢è¡Œ</h4><p>importè¯­å¥ä¸æ¢è¡Œï¼Œåˆ—é™åˆ¶(4.4èŠ‚)å¹¶ä¸é€‚ç”¨äºimportè¯­å¥ã€‚(æ¯ä¸ªimportè¯­å¥ç‹¬ç«‹æˆè¡Œ)</p>
<h4 id="3-3-3-é¡ºåºå’Œé—´è·"><a href="#3-3-3-é¡ºåºå’Œé—´è·" class="headerlink" title="3.3.3 é¡ºåºå’Œé—´è·"></a>3.3.3 é¡ºåºå’Œé—´è·</h4><p>importè¯­å¥å¯åˆ†ä¸ºä»¥ä¸‹å‡ ç»„ï¼ŒæŒ‰ç…§è¿™ä¸ªé¡ºåºï¼Œæ¯ç»„ç”±ä¸€ä¸ªç©ºè¡Œåˆ†éš”ï¼š</p>
<ol>
<li>æ‰€æœ‰çš„é™æ€å¯¼å…¥ç‹¬ç«‹æˆç»„</li>
<li><code>com.google</code> imports(ä»…å½“è¿™ä¸ªæºæ–‡ä»¶æ˜¯åœ¨<code>com.google</code>åŒ…ä¸‹)</li>
<li>ç¬¬ä¸‰æ–¹çš„åŒ…ã€‚æ¯ä¸ªé¡¶çº§åŒ…ä¸ºä¸€ç»„ï¼Œå­—å…¸åºã€‚ä¾‹å¦‚ï¼šandroid, com, junit, org, sun</li>
<li><code>java</code> imports</li>
<li><code>javax</code> imports</li>
</ol>
<p>ç»„å†…ä¸ç©ºè¡Œï¼ŒæŒ‰å­—å…¸åºæ’åˆ—ã€‚</p>
<h3 id="3-4-ç±»å£°æ˜"><a href="#3-4-ç±»å£°æ˜" class="headerlink" title="3.4 ç±»å£°æ˜"></a>3.4 ç±»å£°æ˜</h3><h4 id="3-4-1-åªæœ‰ä¸€ä¸ªé¡¶çº§ç±»å£°æ˜"><a href="#3-4-1-åªæœ‰ä¸€ä¸ªé¡¶çº§ç±»å£°æ˜" class="headerlink" title="3.4.1 åªæœ‰ä¸€ä¸ªé¡¶çº§ç±»å£°æ˜"></a>3.4.1 åªæœ‰ä¸€ä¸ªé¡¶çº§ç±»å£°æ˜</h4><p>æ¯ä¸ªé¡¶çº§ç±»éƒ½åœ¨ä¸€ä¸ªä¸å®ƒåŒåçš„æºæ–‡ä»¶ä¸­(å½“ç„¶ï¼Œè¿˜åŒ…å«<code>.java</code>åç¼€)ã€‚</p>
<p>ä¾‹å¤–ï¼š<code>package-info.java</code>ï¼Œè¯¥æ–‡ä»¶ä¸­å¯æ²¡æœ‰<code>package-info</code>ç±»ã€‚</p>
<h4 id="3-4-2-ç±»æˆå‘˜é¡ºåº"><a href="#3-4-2-ç±»æˆå‘˜é¡ºåº" class="headerlink" title="3.4.2 ç±»æˆå‘˜é¡ºåº"></a>3.4.2 ç±»æˆå‘˜é¡ºåº</h4><p>ç±»çš„æˆå‘˜é¡ºåºå¯¹æ˜“å­¦æ€§æœ‰å¾ˆå¤§çš„å½±å“ï¼Œä½†è¿™ä¹Ÿä¸å­˜åœ¨å”¯ä¸€çš„é€šç”¨æ³•åˆ™ã€‚ä¸åŒçš„ç±»å¯¹æˆå‘˜çš„æ’åºå¯èƒ½æ˜¯ä¸åŒçš„ã€‚<br>æœ€é‡è¦çš„ä¸€ç‚¹ï¼Œæ¯ä¸ªç±»åº”è¯¥ä»¥æŸç§é€»è¾‘å»æ’åºå®ƒçš„æˆå‘˜ï¼Œç»´æŠ¤è€…åº”è¯¥è¦èƒ½è§£é‡Šè¿™ç§æ’åºé€»è¾‘ã€‚æ¯”å¦‚ï¼Œ<br>æ–°çš„æ–¹æ³•ä¸èƒ½æ€»æ˜¯ä¹ æƒ¯æ€§åœ°æ·»åŠ åˆ°ç±»çš„ç»“å°¾ï¼Œå› ä¸ºè¿™æ ·å°±æ˜¯æŒ‰æ—¶é—´é¡ºåºè€ŒéæŸç§é€»è¾‘æ¥æ’åºçš„ã€‚</p>
<h5 id="3-4-2-1-é‡è½½ï¼šæ°¸ä¸åˆ†ç¦»"><a href="#3-4-2-1-é‡è½½ï¼šæ°¸ä¸åˆ†ç¦»" class="headerlink" title="3.4.2.1 é‡è½½ï¼šæ°¸ä¸åˆ†ç¦»"></a>3.4.2.1 é‡è½½ï¼šæ°¸ä¸åˆ†ç¦»</h5><p>å½“ä¸€ä¸ªç±»æœ‰å¤šä¸ªæ„é€ å‡½æ•°ï¼Œæˆ–æ˜¯å¤šä¸ªåŒåæ–¹æ³•ï¼Œè¿™äº›å‡½æ•°/æ–¹æ³•åº”è¯¥æŒ‰é¡ºåºå‡ºç°åœ¨ä¸€èµ·ï¼Œä¸­é—´ä¸è¦æ”¾è¿›å…¶å®ƒå‡½æ•°/æ–¹æ³•ã€‚</p>
<h2 id="æ ¼å¼"><a href="#æ ¼å¼" class="headerlink" title="æ ¼å¼"></a><a id="Format">æ ¼å¼</a></h2><p><strong>æœ¯è¯­è¯´æ˜</strong>ï¼šå—çŠ¶ç»“æ„(block-like construct)æŒ‡çš„æ˜¯ä¸€ä¸ªç±»ï¼Œæ–¹æ³•æˆ–æ„é€ å‡½æ•°çš„ä¸»ä½“ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ•°ç»„åˆå§‹åŒ–ä¸­çš„åˆå§‹å€¼å¯è¢«é€‰æ‹©æ€§åœ°è§†ä¸ºå—çŠ¶ç»“æ„(4.8.3.1èŠ‚)ã€‚</p>
<h3 id="4-1-å¤§æ‹¬å·"><a href="#4-1-å¤§æ‹¬å·" class="headerlink" title="4.1 å¤§æ‹¬å·"></a>4.1 å¤§æ‹¬å·</h3><h4 id="4-1-1-ä½¿ç”¨å¤§æ‹¬å·-å³ä½¿æ˜¯å¯é€‰çš„"><a href="#4-1-1-ä½¿ç”¨å¤§æ‹¬å·-å³ä½¿æ˜¯å¯é€‰çš„" class="headerlink" title="4.1.1 ä½¿ç”¨å¤§æ‹¬å·(å³ä½¿æ˜¯å¯é€‰çš„)"></a>4.1.1 ä½¿ç”¨å¤§æ‹¬å·(å³ä½¿æ˜¯å¯é€‰çš„)</h4><p>å¤§æ‹¬å·ä¸<code>if, else, for, do, while</code>è¯­å¥ä¸€èµ·ä½¿ç”¨ï¼Œå³ä½¿åªæœ‰ä¸€æ¡è¯­å¥(æˆ–æ˜¯ç©º)ï¼Œä¹Ÿåº”è¯¥æŠŠå¤§æ‹¬å·å†™ä¸Šã€‚</p>
<h4 id="4-1-2-éç©ºå—ï¼šK-amp-R-é£æ ¼"><a href="#4-1-2-éç©ºå—ï¼šK-amp-R-é£æ ¼" class="headerlink" title="4.1.2 éç©ºå—ï¼šK &amp; R é£æ ¼"></a>4.1.2 éç©ºå—ï¼šK &amp; R é£æ ¼</h4><p>å¯¹äºéç©ºå—å’Œå—çŠ¶ç»“æ„ï¼Œå¤§æ‹¬å·éµå¾ªKernighanå’ŒRitchieé£æ ¼<br>(<a href="http://www.codinghorror.com/blog/2012/07/new-programming-jargon.html" target="_blank" rel="noopener">Egyptian brackets</a>):</p>
<ul>
<li>å·¦å¤§æ‹¬å·å‰ä¸æ¢è¡Œ</li>
<li>å·¦å¤§æ‹¬å·åæ¢è¡Œ</li>
<li>å³å¤§æ‹¬å·å‰æ¢è¡Œ</li>
<li>å¦‚æœå³å¤§æ‹¬å·æ˜¯ä¸€ä¸ªè¯­å¥ã€å‡½æ•°ä½“æˆ–ç±»çš„ç»ˆæ­¢ï¼Œåˆ™å³å¤§æ‹¬å·åæ¢è¡Œ; å¦åˆ™ä¸æ¢è¡Œã€‚ä¾‹å¦‚ï¼Œå¦‚æœå³å¤§æ‹¬å·åé¢æ˜¯elseæˆ–é€—å·ï¼Œåˆ™ä¸æ¢è¡Œã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code>return new MyClass() {
  @Override public void method() {
    if (condition()) {
      try {
        something();
      } catch (ProblemException e) {
        recover();
      }
    }
  }
};
</code></pre><p>4.8.1èŠ‚ç»™å‡ºäº†enumç±»çš„ä¸€äº›ä¾‹å¤–ã€‚</p>
<h4 id="4-1-3-ç©ºå—ï¼šå¯ä»¥ç”¨ç®€æ´ç‰ˆæœ¬"><a href="#4-1-3-ç©ºå—ï¼šå¯ä»¥ç”¨ç®€æ´ç‰ˆæœ¬" class="headerlink" title="4.1.3 ç©ºå—ï¼šå¯ä»¥ç”¨ç®€æ´ç‰ˆæœ¬"></a>4.1.3 ç©ºå—ï¼šå¯ä»¥ç”¨ç®€æ´ç‰ˆæœ¬</h4><p>ä¸€ä¸ªç©ºçš„å—çŠ¶ç»“æ„é‡Œä»€ä¹ˆä¹Ÿä¸åŒ…å«ï¼Œå¤§æ‹¬å·å¯ä»¥ç®€æ´åœ°å†™æˆ<code>{}</code>ï¼Œä¸éœ€è¦æ¢è¡Œã€‚ä¾‹å¤–ï¼šå¦‚æœå®ƒæ˜¯ä¸€ä¸ªå¤šå—è¯­å¥çš„ä¸€éƒ¨åˆ†(if/else æˆ– try/catch/finally)<br>ï¼Œå³ä½¿å¤§æ‹¬å·å†…æ²¡å†…å®¹ï¼Œå³å¤§æ‹¬å·ä¹Ÿè¦æ¢è¡Œã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code>void doNothing() {}
</code></pre><h3 id="4-2-å—ç¼©è¿›ï¼š2ä¸ªç©ºæ ¼"><a href="#4-2-å—ç¼©è¿›ï¼š2ä¸ªç©ºæ ¼" class="headerlink" title="4.2 å—ç¼©è¿›ï¼š2ä¸ªç©ºæ ¼"></a>4.2 å—ç¼©è¿›ï¼š2ä¸ªç©ºæ ¼</h3><p>æ¯å½“å¼€å§‹ä¸€ä¸ªæ–°çš„å—ï¼Œç¼©è¿›å¢åŠ 2ä¸ªç©ºæ ¼ï¼Œå½“å—ç»“æŸæ—¶ï¼Œç¼©è¿›è¿”å›å…ˆå‰çš„ç¼©è¿›çº§åˆ«ã€‚ç¼©è¿›çº§åˆ«é€‚ç”¨äºä»£ç å’Œæ³¨é‡Šã€‚(è§4.1.2èŠ‚ä¸­çš„ä»£ç ç¤ºä¾‹)</p>
<h3 id="4-3-ä¸€è¡Œä¸€ä¸ªè¯­å¥"><a href="#4-3-ä¸€è¡Œä¸€ä¸ªè¯­å¥" class="headerlink" title="4.3 ä¸€è¡Œä¸€ä¸ªè¯­å¥"></a>4.3 ä¸€è¡Œä¸€ä¸ªè¯­å¥</h3><p>æ¯ä¸ªè¯­å¥åè¦æ¢è¡Œã€‚</p>
<h3 id="4-4-åˆ—é™åˆ¶ï¼š80æˆ–100"><a href="#4-4-åˆ—é™åˆ¶ï¼š80æˆ–100" class="headerlink" title="4.4 åˆ—é™åˆ¶ï¼š80æˆ–100"></a>4.4 åˆ—é™åˆ¶ï¼š80æˆ–100</h3><p>ä¸€ä¸ªé¡¹ç›®å¯ä»¥é€‰æ‹©ä¸€è¡Œ80ä¸ªå­—ç¬¦æˆ–100ä¸ªå­—ç¬¦çš„åˆ—é™åˆ¶ï¼Œé™¤äº†ä¸‹è¿°ä¾‹å¤–ï¼Œä»»ä½•ä¸€è¡Œå¦‚æœè¶…è¿‡è¿™ä¸ªå­—ç¬¦æ•°é™åˆ¶ï¼Œå¿…é¡»è‡ªåŠ¨æ¢è¡Œã€‚</p>
<p>ä¾‹å¤–ï¼š</p>
<ol>
<li>ä¸å¯èƒ½æ»¡è¶³åˆ—é™åˆ¶çš„è¡Œ(ä¾‹å¦‚ï¼ŒJavadocä¸­çš„ä¸€ä¸ªé•¿URLï¼Œæˆ–æ˜¯ä¸€ä¸ªé•¿çš„JSNIæ–¹æ³•å‚è€ƒ)ã€‚</li>
<li><code>package</code>å’Œ<code>import</code>è¯­å¥(è§3.2èŠ‚å’Œ3.3èŠ‚)ã€‚</li>
<li>æ³¨é‡Šä¸­é‚£äº›å¯èƒ½è¢«å‰ªåˆ‡å¹¶ç²˜è´´åˆ°shellä¸­çš„å‘½ä»¤è¡Œã€‚</li>
</ol>
<h3 id="4-5-è‡ªåŠ¨æ¢è¡Œ"><a href="#4-5-è‡ªåŠ¨æ¢è¡Œ" class="headerlink" title="4.5 è‡ªåŠ¨æ¢è¡Œ"></a>4.5 è‡ªåŠ¨æ¢è¡Œ</h3><p><strong>æœ¯è¯­è¯´æ˜</strong>ï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸€è¡Œé•¿ä»£ç ä¸ºäº†é¿å…è¶…å‡ºåˆ—é™åˆ¶(80æˆ–100ä¸ªå­—ç¬¦)è€Œè¢«åˆ†ä¸ºå¤šè¡Œï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºè‡ªåŠ¨æ¢è¡Œ(line-wrapping)ã€‚</p>
<p>æˆ‘ä»¬å¹¶æ²¡æœ‰å…¨é¢ï¼Œç¡®å®šæ€§çš„å‡†åˆ™æ¥å†³å®šåœ¨æ¯ä¸€ç§æƒ…å†µä¸‹å¦‚ä½•è‡ªåŠ¨æ¢è¡Œã€‚å¾ˆå¤šæ—¶å€™ï¼Œå¯¹äºåŒä¸€æ®µä»£ç ä¼šæœ‰å¥½å‡ ç§æœ‰æ•ˆçš„è‡ªåŠ¨æ¢è¡Œæ–¹å¼ã€‚</p>
<blockquote>
<blockquote>
<p>Tip: æå–æ–¹æ³•æˆ–å±€éƒ¨å˜é‡å¯ä»¥åœ¨ä¸æ¢è¡Œçš„æƒ…å†µä¸‹è§£å†³ä»£ç è¿‡é•¿çš„é—®é¢˜(æ˜¯åˆç†ç¼©çŸ­å‘½åé•¿åº¦å§)</p>
</blockquote>
</blockquote>
<h4 id="4-5-1-ä»å“ªé‡Œæ–­å¼€"><a href="#4-5-1-ä»å“ªé‡Œæ–­å¼€" class="headerlink" title="4.5.1 ä»å“ªé‡Œæ–­å¼€"></a>4.5.1 ä»å“ªé‡Œæ–­å¼€</h4><p>è‡ªåŠ¨æ¢è¡Œçš„åŸºæœ¬å‡†åˆ™æ˜¯ï¼šæ›´å€¾å‘äºåœ¨æ›´é«˜çš„è¯­æ³•çº§åˆ«å¤„æ–­å¼€ã€‚</p>
<ol>
<li>å¦‚æœåœ¨<code>éèµ‹å€¼è¿ç®—ç¬¦</code>å¤„æ–­å¼€ï¼Œé‚£ä¹ˆåœ¨è¯¥ç¬¦å·å‰æ–­å¼€(æ¯”å¦‚+ï¼Œå®ƒå°†ä½äºä¸‹ä¸€è¡Œ)ã€‚æ³¨æ„ï¼šè¿™ä¸€ç‚¹ä¸Googleå…¶å®ƒè¯­è¨€çš„ç¼–ç¨‹é£æ ¼ä¸åŒ(å¦‚C++å’ŒJavaScript)ã€‚<br>è¿™æ¡è§„åˆ™ä¹Ÿé€‚ç”¨äºä»¥ä¸‹â€œç±»è¿ç®—ç¬¦â€ç¬¦å·ï¼šç‚¹åˆ†éš”ç¬¦(.)ï¼Œç±»å‹ç•Œé™ä¸­çš„&amp;ï¼ˆ<code>&lt;T extends Foo &amp; Bar&gt;</code>)ï¼Œcatchå—ä¸­çš„ç®¡é“ç¬¦å·(<code>catch (FooException | BarException e</code>)</li>
<li>å¦‚æœåœ¨<code>èµ‹å€¼è¿ç®—ç¬¦</code>å¤„æ–­å¼€ï¼Œé€šå¸¸çš„åšæ³•æ˜¯åœ¨è¯¥ç¬¦å·åæ–­å¼€(æ¯”å¦‚=ï¼Œå®ƒä¸å‰é¢çš„å†…å®¹ç•™åœ¨åŒä¸€è¡Œ)ã€‚è¿™æ¡è§„åˆ™ä¹Ÿé€‚ç”¨äº<code>foreach</code>è¯­å¥ä¸­çš„åˆ†å·ã€‚</li>
<li>æ–¹æ³•åæˆ–æ„é€ å‡½æ•°åä¸å·¦æ‹¬å·ç•™åœ¨åŒä¸€è¡Œã€‚</li>
<li>é€—å·(,)ä¸å…¶å‰é¢çš„å†…å®¹ç•™åœ¨åŒä¸€è¡Œã€‚</li>
</ol>
<h4 id="4-5-2-è‡ªåŠ¨æ¢è¡Œæ—¶ç¼©è¿›è‡³å°‘-4ä¸ªç©ºæ ¼"><a href="#4-5-2-è‡ªåŠ¨æ¢è¡Œæ—¶ç¼©è¿›è‡³å°‘-4ä¸ªç©ºæ ¼" class="headerlink" title="4.5.2 è‡ªåŠ¨æ¢è¡Œæ—¶ç¼©è¿›è‡³å°‘+4ä¸ªç©ºæ ¼"></a>4.5.2 è‡ªåŠ¨æ¢è¡Œæ—¶ç¼©è¿›è‡³å°‘+4ä¸ªç©ºæ ¼</h4><p>è‡ªåŠ¨æ¢è¡Œæ—¶ï¼Œç¬¬ä¸€è¡Œåçš„æ¯ä¸€è¡Œè‡³å°‘æ¯”ç¬¬ä¸€è¡Œå¤šç¼©è¿›4ä¸ªç©ºæ ¼(æ³¨æ„ï¼šåˆ¶è¡¨ç¬¦ä¸ç”¨äºç¼©è¿›ã€‚è§2.3.1èŠ‚)ã€‚</p>
<p>å½“å­˜åœ¨è¿ç»­è‡ªåŠ¨æ¢è¡Œæ—¶ï¼Œç¼©è¿›å¯èƒ½ä¼šå¤šç¼©è¿›ä¸åª4ä¸ªç©ºæ ¼(è¯­æ³•å…ƒç´ å­˜åœ¨å¤šçº§æ—¶)ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œä¸¤ä¸ªè¿ç»­è¡Œä½¿ç”¨ç›¸åŒçš„ç¼©è¿›å½“ä¸”ä»…å½“å®ƒä»¬å¼€å§‹äºåŒçº§è¯­æ³•å…ƒç´ ã€‚</p>
<p>ç¬¬4.6.3æ°´å¹³å¯¹é½ä¸€èŠ‚ä¸­æŒ‡å‡ºï¼Œä¸é¼“åŠ±ä½¿ç”¨å¯å˜æ•°ç›®çš„ç©ºæ ¼æ¥å¯¹é½å‰é¢è¡Œçš„ç¬¦å·ã€‚</p>
<h3 id="4-6-ç©ºç™½"><a href="#4-6-ç©ºç™½" class="headerlink" title="4.6 ç©ºç™½"></a>4.6 ç©ºç™½</h3><h4 id="4-6-1-å‚ç›´ç©ºç™½"><a href="#4-6-1-å‚ç›´ç©ºç™½" class="headerlink" title="4.6.1 å‚ç›´ç©ºç™½"></a>4.6.1 å‚ç›´ç©ºç™½</h4><p>ä»¥ä¸‹æƒ…å†µéœ€è¦ä½¿ç”¨ä¸€ä¸ªç©ºè¡Œï¼š</p>
<ol>
<li>ç±»å†…è¿ç»­çš„æˆå‘˜ä¹‹é—´ï¼šå­—æ®µï¼Œæ„é€ å‡½æ•°ï¼Œæ–¹æ³•ï¼ŒåµŒå¥—ç±»ï¼Œé™æ€åˆå§‹åŒ–å—ï¼Œå®ä¾‹åˆå§‹åŒ–å—ã€‚<ul>
<li><strong>ä¾‹å¤–</strong>ï¼šä¸¤ä¸ªè¿ç»­å­—æ®µä¹‹é—´çš„ç©ºè¡Œæ˜¯å¯é€‰çš„ï¼Œç”¨äºå­—æ®µçš„ç©ºè¡Œä¸»è¦ç”¨æ¥å¯¹å­—æ®µè¿›è¡Œé€»è¾‘åˆ†ç»„ã€‚</li>
</ul>
</li>
<li>åœ¨å‡½æ•°ä½“å†…ï¼Œè¯­å¥çš„é€»è¾‘åˆ†ç»„é—´ä½¿ç”¨ç©ºè¡Œã€‚</li>
<li>ç±»å†…çš„ç¬¬ä¸€ä¸ªæˆå‘˜å‰æˆ–æœ€åä¸€ä¸ªæˆå‘˜åçš„ç©ºè¡Œæ˜¯å¯é€‰çš„(æ—¢ä¸é¼“åŠ±ä¹Ÿä¸åå¯¹è¿™æ ·åšï¼Œè§†ä¸ªäººå–œå¥½è€Œå®š)ã€‚</li>
<li>è¦æ»¡è¶³æœ¬æ–‡æ¡£ä¸­å…¶ä»–èŠ‚çš„ç©ºè¡Œè¦æ±‚(æ¯”å¦‚3.3èŠ‚ï¼šimportè¯­å¥)</li>
</ol>
<p>å¤šä¸ªè¿ç»­çš„ç©ºè¡Œæ˜¯å…è®¸çš„ï¼Œä½†æ²¡æœ‰å¿…è¦è¿™æ ·åš(æˆ‘ä»¬ä¹Ÿä¸é¼“åŠ±è¿™æ ·åš)ã€‚</p>
<h4 id="4-6-2-æ°´å¹³ç©ºç™½"><a href="#4-6-2-æ°´å¹³ç©ºç™½" class="headerlink" title="4.6.2 æ°´å¹³ç©ºç™½"></a>4.6.2 æ°´å¹³ç©ºç™½</h4><p>é™¤äº†è¯­è¨€éœ€æ±‚å’Œå…¶å®ƒè§„åˆ™ï¼Œå¹¶ä¸”é™¤äº†æ–‡å­—ï¼Œæ³¨é‡Šå’ŒJavadocç”¨åˆ°å•ä¸ªç©ºæ ¼ï¼Œå•ä¸ªASCIIç©ºæ ¼ä¹Ÿå‡ºç°åœ¨ä»¥ä¸‹å‡ ä¸ªåœ°æ–¹ï¼š</p>
<ol>
<li>åˆ†éš”ä»»ä½•ä¿ç•™å­—ä¸ç´§éšå…¶åçš„å·¦æ‹¬å·(<code>(</code>)(å¦‚<code>if, for catch</code>ç­‰)ã€‚</li>
<li>åˆ†éš”ä»»ä½•ä¿ç•™å­—ä¸å…¶å‰é¢çš„å³å¤§æ‹¬å·(<code>}</code>)(å¦‚<code>else, catch</code>)ã€‚</li>
<li>åœ¨ä»»ä½•å·¦å¤§æ‹¬å·å‰(<code>{</code>)ï¼Œä¸¤ä¸ªä¾‹å¤–ï¼š<ul>
<li><code>@SomeAnnotation({a, b})</code>(ä¸ä½¿ç”¨ç©ºæ ¼)ã€‚</li>
<li><code>String[][] x = foo;</code>(å¤§æ‹¬å·é—´æ²¡æœ‰ç©ºæ ¼ï¼Œè§ä¸‹é¢çš„Note)ã€‚</li>
</ul>
</li>
<li>åœ¨ä»»ä½•äºŒå…ƒæˆ–ä¸‰å…ƒè¿ç®—ç¬¦çš„ä¸¤ä¾§ã€‚è¿™ä¹Ÿé€‚ç”¨äºä»¥ä¸‹â€œç±»è¿ç®—ç¬¦â€ç¬¦å·ï¼š<ul>
<li>ç±»å‹ç•Œé™ä¸­çš„&amp;(<code>&lt;T extends Foo &amp; Bar&gt;</code>)ã€‚</li>
<li>catchå—ä¸­çš„ç®¡é“ç¬¦å·(<code>catch (FooException | BarException e</code>)ã€‚</li>
<li><code>foreach</code>è¯­å¥ä¸­çš„åˆ†å·ã€‚</li>
</ul>
</li>
<li>åœ¨<code>, : ;</code>åŠå³æ‹¬å·(<code>)</code>)å</li>
<li>å¦‚æœåœ¨ä¸€æ¡è¯­å¥ååšæ³¨é‡Šï¼Œåˆ™åŒæ–œæ (//)ä¸¤è¾¹éƒ½è¦ç©ºæ ¼ã€‚è¿™é‡Œå¯ä»¥å…è®¸å¤šä¸ªç©ºæ ¼ï¼Œä½†æ²¡æœ‰å¿…è¦ã€‚</li>
<li>ç±»å‹å’Œå˜é‡ä¹‹é—´ï¼šList<string> listã€‚</string></li>
<li>æ•°ç»„åˆå§‹åŒ–ä¸­ï¼Œå¤§æ‹¬å·å†…çš„ç©ºæ ¼æ˜¯å¯é€‰çš„ï¼Œå³<code>new int[] {5, 6}</code>å’Œ<code>new int[] { 5, 6 }</code>éƒ½æ˜¯å¯ä»¥çš„ã€‚</li>
</ol>
<blockquote>
<blockquote>
<p>Noteï¼šè¿™ä¸ªè§„åˆ™å¹¶ä¸è¦æ±‚æˆ–ç¦æ­¢ä¸€è¡Œçš„å¼€å…³æˆ–ç»“å°¾éœ€è¦é¢å¤–çš„ç©ºæ ¼ï¼Œåªå¯¹å†…éƒ¨ç©ºæ ¼åšè¦æ±‚ã€‚</p>
</blockquote>
</blockquote>
<h4 id="4-6-3-æ°´å¹³å¯¹é½ï¼šä¸åšè¦æ±‚"><a href="#4-6-3-æ°´å¹³å¯¹é½ï¼šä¸åšè¦æ±‚" class="headerlink" title="4.6.3 æ°´å¹³å¯¹é½ï¼šä¸åšè¦æ±‚"></a>4.6.3 æ°´å¹³å¯¹é½ï¼šä¸åšè¦æ±‚</h4><p><strong>æœ¯è¯­è¯´æ˜</strong>ï¼šæ°´å¹³å¯¹é½æŒ‡çš„æ˜¯é€šè¿‡å¢åŠ å¯å˜æ•°é‡çš„ç©ºæ ¼æ¥ä½¿æŸä¸€è¡Œçš„å­—ç¬¦ä¸ä¸Šä¸€è¡Œçš„ç›¸åº”å­—ç¬¦å¯¹é½ã€‚</p>
<p>è¿™æ˜¯å…è®¸çš„(è€Œä¸”åœ¨ä¸å°‘åœ°æ–¹å¯ä»¥çœ‹åˆ°è¿™æ ·çš„ä»£ç )ï¼Œä½†Googleç¼–ç¨‹é£æ ¼å¯¹æ­¤ä¸åšè¦æ±‚ã€‚å³ä½¿å¯¹äºå·²ç»ä½¿ç”¨æ°´å¹³å¯¹é½çš„ä»£ç ï¼Œæˆ‘ä»¬ä¹Ÿä¸éœ€è¦å»ä¿æŒè¿™ç§é£æ ¼ã€‚</p>
<p>ä»¥ä¸‹ç¤ºä¾‹å…ˆå±•ç¤ºæœªå¯¹é½çš„ä»£ç ï¼Œç„¶åæ˜¯å¯¹é½çš„ä»£ç ï¼š</p>
<p>private int x; // this is fine<br>private Color color; // this too</p>
<p>private int   x;      // permitted, but future edits<br>private Color color;  // may leave it unaligned</p>
<blockquote>
<blockquote>
<p>Tipï¼šå¯¹é½å¯å¢åŠ ä»£ç å¯è¯»æ€§ï¼Œä½†å®ƒä¸ºæ—¥åçš„ç»´æŠ¤å¸¦æ¥é—®é¢˜ã€‚è€ƒè™‘æœªæ¥æŸä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸€å †å¯¹é½çš„ä»£ç ä¸­çš„ä¸€è¡Œã€‚<br>è¿™å¯èƒ½å¯¼è‡´åŸæœ¬å¾ˆæ¼‚äº®çš„å¯¹é½ä»£ç å˜å¾—é”™ä½ã€‚å¾ˆå¯èƒ½å®ƒä¼šæç¤ºä½ è°ƒæ•´å‘¨å›´ä»£ç çš„ç©ºç™½æ¥ä½¿è¿™ä¸€å †ä»£ç é‡æ–°æ°´å¹³å¯¹é½(æ¯”å¦‚ç¨‹åºå‘˜æƒ³ä¿æŒè¿™ç§æ°´å¹³å¯¹é½çš„é£æ ¼)ï¼Œ<br>è¿™å°±ä¼šè®©ä½ åšè®¸å¤šçš„æ— ç”¨åŠŸï¼Œå¢åŠ äº†reviewerçš„å·¥ä½œå¹¶ä¸”å¯èƒ½å¯¼è‡´æ›´å¤šçš„åˆå¹¶å†²çªã€‚</p>
</blockquote>
</blockquote>
<h3 id="4-7-ç”¨å°æ‹¬å·æ¥é™å®šç»„ï¼šæ¨è"><a href="#4-7-ç”¨å°æ‹¬å·æ¥é™å®šç»„ï¼šæ¨è" class="headerlink" title="4.7 ç”¨å°æ‹¬å·æ¥é™å®šç»„ï¼šæ¨è"></a>4.7 ç”¨å°æ‹¬å·æ¥é™å®šç»„ï¼šæ¨è</h3><p>é™¤éä½œè€…å’Œrevieweréƒ½è®¤ä¸ºå»æ‰å°æ‹¬å·ä¹Ÿä¸ä¼šä½¿ä»£ç è¢«è¯¯è§£ï¼Œæˆ–æ˜¯å»æ‰å°æ‹¬å·èƒ½è®©ä»£ç æ›´æ˜“äºé˜…è¯»ï¼Œå¦åˆ™æˆ‘ä»¬ä¸åº”è¯¥å»æ‰å°æ‹¬å·ã€‚<br>æˆ‘ä»¬æ²¡æœ‰ç†ç”±å‡è®¾è¯»è€…èƒ½è®°ä½æ•´ä¸ªJavaè¿ç®—ç¬¦ä¼˜å…ˆçº§è¡¨ã€‚</p>
<h3 id="4-8-å…·ä½“ç»“æ„"><a href="#4-8-å…·ä½“ç»“æ„" class="headerlink" title="4.8 å…·ä½“ç»“æ„"></a>4.8 å…·ä½“ç»“æ„</h3><h4 id="4-8-1-æšä¸¾ç±»"><a href="#4-8-1-æšä¸¾ç±»" class="headerlink" title="4.8.1 æšä¸¾ç±»"></a>4.8.1 æšä¸¾ç±»</h4><p>æšä¸¾å¸¸é‡é—´ç”¨é€—å·éš”å¼€ï¼Œæ¢è¡Œå¯é€‰ã€‚</p>
<p>æ²¡æœ‰æ–¹æ³•å’Œæ–‡æ¡£çš„æšä¸¾ç±»å¯å†™æˆæ•°ç»„åˆå§‹åŒ–çš„æ ¼å¼ï¼š</p>
<pre><code>private enum Suit { CLUBS, HEARTS, SPADES, DIAMONDS }
</code></pre><p>ç”±äºæšä¸¾ç±»ä¹Ÿæ˜¯ä¸€ä¸ªç±»ï¼Œå› æ­¤æ‰€æœ‰é€‚ç”¨äºå…¶å®ƒç±»çš„æ ¼å¼è§„åˆ™ä¹Ÿé€‚ç”¨äºæšä¸¾ç±»ã€‚</p>
<h4 id="4-8-2-å˜é‡å£°æ˜"><a href="#4-8-2-å˜é‡å£°æ˜" class="headerlink" title="4.8.2 å˜é‡å£°æ˜"></a>4.8.2 å˜é‡å£°æ˜</h4><h5 id="4-8-2-1-æ¯æ¬¡åªå£°æ˜ä¸€ä¸ªå˜é‡"><a href="#4-8-2-1-æ¯æ¬¡åªå£°æ˜ä¸€ä¸ªå˜é‡" class="headerlink" title="4.8.2.1 æ¯æ¬¡åªå£°æ˜ä¸€ä¸ªå˜é‡"></a>4.8.2.1 æ¯æ¬¡åªå£°æ˜ä¸€ä¸ªå˜é‡</h5><p>ä¸è¦ä½¿ç”¨ç»„åˆå£°æ˜ï¼Œæ¯”å¦‚<code>int a, b;</code>ã€‚</p>
<h5 id="4-8-2-2-éœ€è¦æ—¶æ‰å£°æ˜ï¼Œå¹¶å°½å¿«è¿›è¡Œåˆå§‹åŒ–"><a href="#4-8-2-2-éœ€è¦æ—¶æ‰å£°æ˜ï¼Œå¹¶å°½å¿«è¿›è¡Œåˆå§‹åŒ–" class="headerlink" title="4.8.2.2 éœ€è¦æ—¶æ‰å£°æ˜ï¼Œå¹¶å°½å¿«è¿›è¡Œåˆå§‹åŒ–"></a>4.8.2.2 éœ€è¦æ—¶æ‰å£°æ˜ï¼Œå¹¶å°½å¿«è¿›è¡Œåˆå§‹åŒ–</h5><p>ä¸è¦åœ¨ä¸€ä¸ªä»£ç å—çš„å¼€å¤´æŠŠå±€éƒ¨å˜é‡ä¸€æ¬¡æ€§éƒ½å£°æ˜äº†(è¿™æ˜¯cè¯­è¨€çš„åšæ³•)ï¼Œè€Œæ˜¯åœ¨ç¬¬ä¸€æ¬¡éœ€è¦ä½¿ç”¨å®ƒæ—¶æ‰å£°æ˜ã€‚<br>å±€éƒ¨å˜é‡åœ¨å£°æ˜æ—¶æœ€å¥½å°±è¿›è¡Œåˆå§‹åŒ–ï¼Œæˆ–è€…å£°æ˜åå°½å¿«è¿›è¡Œåˆå§‹åŒ–ã€‚</p>
<h4 id="4-8-3-æ•°ç»„"><a href="#4-8-3-æ•°ç»„" class="headerlink" title="4.8.3 æ•°ç»„"></a>4.8.3 æ•°ç»„</h4><h5 id="4-8-3-1-æ•°ç»„åˆå§‹åŒ–ï¼šå¯å†™æˆå—çŠ¶ç»“æ„"><a href="#4-8-3-1-æ•°ç»„åˆå§‹åŒ–ï¼šå¯å†™æˆå—çŠ¶ç»“æ„" class="headerlink" title="4.8.3.1 æ•°ç»„åˆå§‹åŒ–ï¼šå¯å†™æˆå—çŠ¶ç»“æ„"></a>4.8.3.1 æ•°ç»„åˆå§‹åŒ–ï¼šå¯å†™æˆå—çŠ¶ç»“æ„</h5><p>æ•°ç»„åˆå§‹åŒ–å¯ä»¥å†™æˆå—çŠ¶ç»“æ„ï¼Œæ¯”å¦‚ï¼Œä¸‹é¢çš„å†™æ³•éƒ½æ˜¯OKçš„ï¼š</p>
<pre><code>new int[] {
  0, 1, 2, 3
}

new int[] {
  0,
  1,
  2,
  3
}

new int[] {
  0, 1,
  2, 3
}

new int[]
    {0, 1, 2, 3}
</code></pre><h5 id="4-8-3-2-éCé£æ ¼çš„æ•°ç»„å£°æ˜"><a href="#4-8-3-2-éCé£æ ¼çš„æ•°ç»„å£°æ˜" class="headerlink" title="4.8.3.2 éCé£æ ¼çš„æ•°ç»„å£°æ˜"></a>4.8.3.2 éCé£æ ¼çš„æ•°ç»„å£°æ˜</h5><p>ä¸­æ‹¬å·æ˜¯ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼š<code>String[] args</code>ï¼Œ è€Œé<code>String args[]</code>ã€‚</p>
<h4 id="4-8-4-switchè¯­å¥"><a href="#4-8-4-switchè¯­å¥" class="headerlink" title="4.8.4 switchè¯­å¥"></a>4.8.4 switchè¯­å¥</h4><p><strong>æœ¯è¯­è¯´æ˜</strong>ï¼šswitchå—çš„å¤§æ‹¬å·å†…æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªè¯­å¥ç»„ã€‚æ¯ä¸ªè¯­å¥ç»„åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªswitchæ ‡ç­¾(<code>case FOO:</code>æˆ–<code>default:</code>)ï¼Œåé¢è·Ÿç€ä¸€æ¡æˆ–å¤šæ¡è¯­å¥ã€‚</p>
<h5 id="4-8-4-1-ç¼©è¿›"><a href="#4-8-4-1-ç¼©è¿›" class="headerlink" title="4.8.4.1 ç¼©è¿›"></a>4.8.4.1 ç¼©è¿›</h5><p>ä¸å…¶å®ƒå—çŠ¶ç»“æ„ä¸€è‡´ï¼Œswitchå—ä¸­çš„å†…å®¹ç¼©è¿›ä¸º2ä¸ªç©ºæ ¼ã€‚</p>
<p>æ¯ä¸ªswitchæ ‡ç­¾åæ–°èµ·ä¸€è¡Œï¼Œå†ç¼©è¿›2ä¸ªç©ºæ ¼ï¼Œå†™ä¸‹ä¸€æ¡æˆ–å¤šæ¡è¯­å¥ã€‚</p>
<h5 id="4-8-4-2-Fall-throughï¼šæ³¨é‡Š"><a href="#4-8-4-2-Fall-throughï¼šæ³¨é‡Š" class="headerlink" title="4.8.4.2 Fall-throughï¼šæ³¨é‡Š"></a>4.8.4.2 Fall-throughï¼šæ³¨é‡Š</h5><p>åœ¨ä¸€ä¸ªswitchå—å†…ï¼Œæ¯ä¸ªè¯­å¥ç»„è¦ä¹ˆé€šè¿‡<code>break, continue, return</code>æˆ–æŠ›å‡ºå¼‚å¸¸æ¥ç»ˆæ­¢ï¼Œè¦ä¹ˆé€šè¿‡ä¸€æ¡æ³¨é‡Šæ¥è¯´æ˜ç¨‹åºå°†ç»§ç»­æ‰§è¡Œåˆ°ä¸‹ä¸€ä¸ªè¯­å¥ç»„ï¼Œ<br>ä»»ä½•èƒ½è¡¨è¾¾è¿™ä¸ªæ„æ€çš„æ³¨é‡Šéƒ½æ˜¯OKçš„(å…¸å‹çš„æ˜¯ç”¨<code>// fall through</code>)ã€‚è¿™ä¸ªç‰¹æ®Šçš„æ³¨é‡Šå¹¶ä¸éœ€è¦åœ¨æœ€åä¸€ä¸ªè¯­å¥ç»„(ä¸€èˆ¬æ˜¯<code>default</code>)ä¸­å‡ºç°ã€‚ç¤ºä¾‹ï¼š</p>
<pre><code>switch (input) {
  case 1:
  case 2:
    prepareOneOrTwo();
    // fall through
  case 3:
    handleOneTwoOrThree();
    break;
  default:
    handleLargeNumber(input);
}
</code></pre><h5 id="4-8-4-3-defaultçš„æƒ…å†µè¦å†™å‡ºæ¥"><a href="#4-8-4-3-defaultçš„æƒ…å†µè¦å†™å‡ºæ¥" class="headerlink" title="4.8.4.3 defaultçš„æƒ…å†µè¦å†™å‡ºæ¥"></a>4.8.4.3 defaultçš„æƒ…å†µè¦å†™å‡ºæ¥</h5><p>æ¯ä¸ªswitchè¯­å¥éƒ½åŒ…å«ä¸€ä¸ª<code>default</code>è¯­å¥ç»„ï¼Œå³ä½¿å®ƒä»€ä¹ˆä»£ç ä¹Ÿä¸åŒ…å«ã€‚</p>
<h4 id="4-8-5-æ³¨è§£-Annotations"><a href="#4-8-5-æ³¨è§£-Annotations" class="headerlink" title="4.8.5 æ³¨è§£(Annotations)"></a>4.8.5 æ³¨è§£(Annotations)</h4><p>æ³¨è§£ç´§è·Ÿåœ¨æ–‡æ¡£å—åé¢ï¼Œåº”ç”¨äºç±»ã€æ–¹æ³•å’Œæ„é€ å‡½æ•°ï¼Œä¸€ä¸ªæ³¨è§£ç‹¬å ä¸€è¡Œã€‚è¿™äº›æ¢è¡Œä¸å±äºè‡ªåŠ¨æ¢è¡Œ(ç¬¬4.5èŠ‚ï¼Œè‡ªåŠ¨æ¢è¡Œ)ï¼Œå› æ­¤ç¼©è¿›çº§åˆ«ä¸å˜ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code>@Override
@Nullable
public String getNameIfPresent() { ... }
</code></pre><p><strong>ä¾‹å¤–</strong>ï¼šå•ä¸ªçš„æ³¨è§£å¯ä»¥å’Œç­¾åçš„ç¬¬ä¸€è¡Œå‡ºç°åœ¨åŒä¸€è¡Œã€‚ä¾‹å¦‚ï¼š</p>
<pre><code>@Override public int hashCode() { ... }
</code></pre><p>åº”ç”¨äºå­—æ®µçš„æ³¨è§£ç´§éšæ–‡æ¡£å—å‡ºç°ï¼Œåº”ç”¨äºå­—æ®µçš„å¤šä¸ªæ³¨è§£å…è®¸ä¸å­—æ®µå‡ºç°åœ¨åŒä¸€è¡Œã€‚ä¾‹å¦‚ï¼š</p>
<pre><code>@Partial @Mock DataLoader loader;
</code></pre><p>å‚æ•°å’Œå±€éƒ¨å˜é‡æ³¨è§£æ²¡æœ‰ç‰¹å®šè§„åˆ™ã€‚</p>
<h4 id="4-8-6-æ³¨é‡Š"><a href="#4-8-6-æ³¨é‡Š" class="headerlink" title="4.8.6 æ³¨é‡Š"></a>4.8.6 æ³¨é‡Š</h4><h5 id="4-8-6-1-å—æ³¨é‡Šé£æ ¼"><a href="#4-8-6-1-å—æ³¨é‡Šé£æ ¼" class="headerlink" title="4.8.6.1 å—æ³¨é‡Šé£æ ¼"></a>4.8.6.1 å—æ³¨é‡Šé£æ ¼</h5><p>å—æ³¨é‡Šä¸å…¶å‘¨å›´çš„ä»£ç åœ¨åŒä¸€ç¼©è¿›çº§åˆ«ã€‚å®ƒä»¬å¯ä»¥æ˜¯<code>/* ... */</code>é£æ ¼ï¼Œä¹Ÿå¯ä»¥æ˜¯<code>// ...</code>é£æ ¼ã€‚å¯¹äºå¤šè¡Œçš„<code>/* ... */</code>æ³¨é‡Šï¼Œåç»­è¡Œå¿…é¡»ä»<code>*</code>å¼€å§‹ï¼Œ<br>å¹¶ä¸”ä¸å‰ä¸€è¡Œçš„<code>*</code>å¯¹é½ã€‚ä»¥ä¸‹ç¤ºä¾‹æ³¨é‡Šéƒ½æ˜¯OKçš„ã€‚</p>
<pre><code>/*
 * This is          // And so           /* Or you can
 * okay.            // is this.          * even do this. */
 */
</code></pre><p>æ³¨é‡Šä¸è¦å°é—­åœ¨ç”±æ˜Ÿå·æˆ–å…¶å®ƒå­—ç¬¦ç»˜åˆ¶çš„æ¡†æ¶é‡Œã€‚</p>
<blockquote>
<blockquote>
<p>Tipï¼šåœ¨å†™å¤šè¡Œæ³¨é‡Šæ—¶ï¼Œå¦‚æœä½ å¸Œæœ›åœ¨å¿…è¦æ—¶èƒ½é‡æ–°æ¢è¡Œ(å³æ³¨é‡Šåƒæ®µè½é£æ ¼ä¸€æ ·)ï¼Œé‚£ä¹ˆä½¿ç”¨<code>/* ... */</code>ã€‚</p>
</blockquote>
</blockquote>
<h4 id="4-8-7-Modifiers"><a href="#4-8-7-Modifiers" class="headerlink" title="4.8.7 Modifiers"></a>4.8.7 Modifiers</h4><p>ç±»å’Œæˆå‘˜çš„modifierså¦‚æœå­˜åœ¨ï¼Œåˆ™æŒ‰Javaè¯­è¨€è§„èŒƒä¸­æ¨èçš„é¡ºåºå‡ºç°ã€‚</p>
<p>public protected private abstract static final transient volatile synchronized native strictfp</p>
<h2 id="å‘½åçº¦å®š"><a href="#å‘½åçº¦å®š" class="headerlink" title="å‘½åçº¦å®š"></a><a id="Naming">å‘½åçº¦å®š</a></h2><h3 id="5-1-å¯¹æ‰€æœ‰æ ‡è¯†ç¬¦éƒ½é€šç”¨çš„è§„åˆ™"><a href="#5-1-å¯¹æ‰€æœ‰æ ‡è¯†ç¬¦éƒ½é€šç”¨çš„è§„åˆ™" class="headerlink" title="5.1 å¯¹æ‰€æœ‰æ ‡è¯†ç¬¦éƒ½é€šç”¨çš„è§„åˆ™"></a>5.1 å¯¹æ‰€æœ‰æ ‡è¯†ç¬¦éƒ½é€šç”¨çš„è§„åˆ™</h3><p>æ ‡è¯†ç¬¦åªèƒ½ä½¿ç”¨ASCIIå­—æ¯å’Œæ•°å­—ï¼Œå› æ­¤æ¯ä¸ªæœ‰æ•ˆçš„æ ‡è¯†ç¬¦åç§°éƒ½èƒ½åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼<code>\w+</code>ã€‚</p>
<p>åœ¨Googleå…¶å®ƒç¼–ç¨‹è¯­è¨€é£æ ¼ä¸­ä½¿ç”¨çš„ç‰¹æ®Šå‰ç¼€æˆ–åç¼€ï¼Œå¦‚<code>name_</code>, <code>mName</code>, <code>s_name</code>å’Œ<code>kName</code>ï¼Œåœ¨Javaç¼–ç¨‹é£æ ¼ä¸­éƒ½ä¸å†ä½¿ç”¨ã€‚</p>
<h3 id="5-2-æ ‡è¯†ç¬¦ç±»å‹çš„è§„åˆ™"><a href="#5-2-æ ‡è¯†ç¬¦ç±»å‹çš„è§„åˆ™" class="headerlink" title="5.2 æ ‡è¯†ç¬¦ç±»å‹çš„è§„åˆ™"></a>5.2 æ ‡è¯†ç¬¦ç±»å‹çš„è§„åˆ™</h3><h4 id="5-2-1-åŒ…å"><a href="#5-2-1-åŒ…å" class="headerlink" title="5.2.1 åŒ…å"></a>5.2.1 åŒ…å</h4><p>åŒ…åå…¨éƒ¨å°å†™ï¼Œè¿ç»­çš„å•è¯åªæ˜¯ç®€å•åœ°è¿æ¥èµ·æ¥ï¼Œä¸ä½¿ç”¨ä¸‹åˆ’çº¿ã€‚</p>
<h4 id="5-2-2-ç±»å"><a href="#5-2-2-ç±»å" class="headerlink" title="5.2.2 ç±»å"></a>5.2.2 ç±»å</h4><p>ç±»åéƒ½ä»¥<code>UpperCamelCase</code>é£æ ¼ç¼–å†™ã€‚</p>
<p>ç±»åé€šå¸¸æ˜¯åè¯æˆ–åè¯çŸ­è¯­ï¼Œæ¥å£åç§°æœ‰æ—¶å¯èƒ½æ˜¯å½¢å®¹è¯æˆ–å½¢å®¹è¯çŸ­è¯­ã€‚ç°åœ¨è¿˜æ²¡æœ‰ç‰¹å®šçš„è§„åˆ™æˆ–è¡Œä¹‹æœ‰æ•ˆçš„çº¦å®šæ¥å‘½åæ³¨è§£ç±»å‹ã€‚</p>
<p>æµ‹è¯•ç±»çš„å‘½åä»¥å®ƒè¦æµ‹è¯•çš„ç±»çš„åç§°å¼€å§‹ï¼Œä»¥<code>Test</code>ç»“æŸã€‚ä¾‹å¦‚ï¼Œ<code>HashTest</code>æˆ–<code>HashIntegrationTest</code>ã€‚</p>
<h4 id="5-2-3-æ–¹æ³•å"><a href="#5-2-3-æ–¹æ³•å" class="headerlink" title="5.2.3 æ–¹æ³•å"></a>5.2.3 æ–¹æ³•å</h4><p>æ–¹æ³•åéƒ½ä»¥<code>lowerCamelCase</code>é£æ ¼ç¼–å†™ã€‚</p>
<p>æ–¹æ³•åé€šå¸¸æ˜¯åŠ¨è¯æˆ–åŠ¨è¯çŸ­è¯­ã€‚</p>
<p>ä¸‹åˆ’çº¿å¯èƒ½å‡ºç°åœ¨JUnitæµ‹è¯•æ–¹æ³•åç§°ä¸­ç”¨ä»¥åˆ†éš”åç§°çš„é€»è¾‘ç»„ä»¶ã€‚ä¸€ä¸ªå…¸å‹çš„æ¨¡å¼æ˜¯ï¼š<code>test&lt;MethodUnderTest&gt;_&lt;state&gt;</code>ï¼Œä¾‹å¦‚<code>testPop_emptyStack</code>ã€‚<br>å¹¶ä¸å­˜åœ¨å”¯ä¸€æ­£ç¡®çš„æ–¹å¼æ¥å‘½åæµ‹è¯•æ–¹æ³•ã€‚</p>
<h4 id="5-2-4-å¸¸é‡å"><a href="#5-2-4-å¸¸é‡å" class="headerlink" title="5.2.4 å¸¸é‡å"></a>5.2.4 å¸¸é‡å</h4><p>å¸¸é‡åå‘½åæ¨¡å¼ä¸º<code>CONSTANT_CASE</code>ï¼Œå…¨éƒ¨å­—æ¯å¤§å†™ï¼Œç”¨ä¸‹åˆ’çº¿åˆ†éš”å•è¯ã€‚é‚£ï¼Œåˆ°åº•ä»€ä¹ˆç®—æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Ÿ</p>
<p>æ¯ä¸ªå¸¸é‡éƒ½æ˜¯ä¸€ä¸ªé™æ€finalå­—æ®µï¼Œä½†ä¸æ˜¯æ‰€æœ‰é™æ€finalå­—æ®µéƒ½æ˜¯å¸¸é‡ã€‚åœ¨å†³å®šä¸€ä¸ªå­—æ®µæ˜¯å¦æ˜¯ä¸€ä¸ªå¸¸é‡æ—¶ï¼Œ<br>è€ƒè™‘å®ƒæ˜¯å¦çœŸçš„æ„Ÿè§‰åƒæ˜¯ä¸€ä¸ªå¸¸é‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä»»ä½•ä¸€ä¸ªè¯¥å®ä¾‹çš„è§‚æµ‹çŠ¶æ€æ˜¯å¯å˜çš„ï¼Œåˆ™å®ƒå‡ ä¹è‚¯å®šä¸ä¼šæ˜¯ä¸€ä¸ªå¸¸é‡ã€‚<br>åªæ˜¯æ°¸è¿œä¸<code>æ‰“ç®—</code>æ”¹å˜å¯¹è±¡ä¸€èˆ¬æ˜¯ä¸å¤Ÿçš„ï¼Œå®ƒè¦çœŸçš„ä¸€ç›´ä¸å˜æ‰èƒ½å°†å®ƒç¤ºä¸ºå¸¸é‡ã€‚</p>
<pre><code>// Constants
static final int NUMBER = 5;
static final ImmutableList&lt;String&gt; NAMES = ImmutableList.of(&quot;Ed&quot;, &quot;Ann&quot;);
static final Joiner COMMA_JOINER = Joiner.on(&apos;,&apos;);  // because Joiner is immutable
static final SomeMutableType[] EMPTY_ARRAY = {};
enum SomeEnum { ENUM_CONSTANT }

// Not constants
static String nonFinal = &quot;non-final&quot;;
final String nonStatic = &quot;non-static&quot;;
static final Set&lt;String&gt; mutableCollection = new HashSet&lt;String&gt;();
static final ImmutableSet&lt;SomeMutableType&gt; mutableElements = ImmutableSet.of(mutable);
static final Logger logger = Logger.getLogger(MyClass.getName());
static final String[] nonEmptyArray = {&quot;these&quot;, &quot;can&quot;, &quot;change&quot;};
</code></pre><p>è¿™äº›åå­—é€šå¸¸æ˜¯åè¯æˆ–åè¯çŸ­è¯­ã€‚</p>
<h4 id="5-2-5-éå¸¸é‡å­—æ®µå"><a href="#5-2-5-éå¸¸é‡å­—æ®µå" class="headerlink" title="5.2.5 éå¸¸é‡å­—æ®µå"></a>5.2.5 éå¸¸é‡å­—æ®µå</h4><p>éå¸¸é‡å­—æ®µåä»¥<code>lowerCamelCase</code>é£æ ¼ç¼–å†™ã€‚</p>
<p>è¿™äº›åå­—é€šå¸¸æ˜¯åè¯æˆ–åè¯çŸ­è¯­ã€‚</p>
<h4 id="5-2-6-å‚æ•°å"><a href="#5-2-6-å‚æ•°å" class="headerlink" title="5.2.6 å‚æ•°å"></a>5.2.6 å‚æ•°å</h4><p>å‚æ•°åä»¥<code>lowerCamelCase</code>é£æ ¼ç¼–å†™ã€‚</p>
<p>å‚æ•°åº”è¯¥é¿å…ç”¨å•ä¸ªå­—ç¬¦å‘½åã€‚</p>
<h4 id="5-2-7-å±€éƒ¨å˜é‡å"><a href="#5-2-7-å±€éƒ¨å˜é‡å" class="headerlink" title="5.2.7 å±€éƒ¨å˜é‡å"></a>5.2.7 å±€éƒ¨å˜é‡å</h4><p>å±€éƒ¨å˜é‡åä»¥<code>lowerCamelCase</code>é£æ ¼ç¼–å†™ï¼Œæ¯”èµ·å…¶å®ƒç±»å‹çš„åç§°ï¼Œå±€éƒ¨å˜é‡åå¯ä»¥æœ‰æ›´ä¸ºå®½æ¾çš„ç¼©å†™ã€‚</p>
<p>è™½ç„¶ç¼©å†™æ›´å®½æ¾ï¼Œä½†è¿˜æ˜¯è¦é¿å…ç”¨å•å­—ç¬¦è¿›è¡Œå‘½åï¼Œé™¤äº†ä¸´æ—¶å˜é‡å’Œå¾ªç¯å˜é‡ã€‚</p>
<p>å³ä½¿å±€éƒ¨å˜é‡æ˜¯finalå’Œä¸å¯æ”¹å˜çš„ï¼Œä¹Ÿä¸åº”è¯¥æŠŠå®ƒç¤ºä¸ºå¸¸é‡ï¼Œè‡ªç„¶ä¹Ÿä¸èƒ½ç”¨å¸¸é‡çš„è§„åˆ™å»å‘½åå®ƒã€‚</p>
<h4 id="5-2-8-ç±»å‹å˜é‡å"><a href="#5-2-8-ç±»å‹å˜é‡å" class="headerlink" title="5.2.8 ç±»å‹å˜é‡å"></a>5.2.8 ç±»å‹å˜é‡å</h4><p>ç±»å‹å˜é‡å¯ç”¨ä»¥ä¸‹ä¸¤ç§é£æ ¼ä¹‹ä¸€è¿›è¡Œå‘½åï¼š</p>
<ul>
<li>å•ä¸ªçš„å¤§å†™å­—æ¯ï¼Œåé¢å¯ä»¥è·Ÿä¸€ä¸ªæ•°å­—(å¦‚ï¼šE, T, X, T2)ã€‚</li>
<li>ä»¥ç±»å‘½åæ–¹å¼(5.2.2èŠ‚)ï¼Œåé¢åŠ ä¸ªå¤§å†™çš„T(å¦‚ï¼šRequestT, FooBarT)ã€‚</li>
</ul>
<h3 id="5-3-é©¼å³°å¼å‘½åæ³•-CamelCase"><a href="#5-3-é©¼å³°å¼å‘½åæ³•-CamelCase" class="headerlink" title="5.3 é©¼å³°å¼å‘½åæ³•(CamelCase)"></a>5.3 é©¼å³°å¼å‘½åæ³•(CamelCase)</h3><p><a href="http://zh.wikipedia.org/wiki/%E9%A7%9D%E5%B3%B0%E5%BC%8F%E5%A4%A7%E5%B0%8F%E5%AF%AB" target="_blank" rel="noopener">é©¼å³°å¼å‘½åæ³•</a>åˆ†å¤§é©¼å³°å¼å‘½åæ³•(<code>UpperCamelCase</code>)å’Œå°é©¼å³°å¼å‘½åæ³•(<code>lowerCamelCase</code>)ã€‚<br>æœ‰æ—¶ï¼Œæˆ‘ä»¬æœ‰ä¸åªä¸€ç§åˆç†çš„æ–¹å¼å°†ä¸€ä¸ªè‹±è¯­è¯ç»„è½¬æ¢æˆé©¼å³°å½¢å¼ï¼Œå¦‚ç¼©ç•¥è¯­æˆ–ä¸å¯»å¸¸çš„ç»“æ„(ä¾‹å¦‚â€IPv6â€æˆ–â€iOSâ€)ã€‚GoogleæŒ‡å®šäº†ä»¥ä¸‹çš„è½¬æ¢æ–¹æ¡ˆã€‚</p>
<p>åå­—ä»<code>æ•£æ–‡å½¢å¼</code>(prose form)å¼€å§‹:</p>
<ol>
<li>æŠŠçŸ­è¯­è½¬æ¢ä¸ºçº¯ASCIIç ï¼Œå¹¶ä¸”ç§»é™¤ä»»ä½•å•å¼•å·ã€‚ä¾‹å¦‚ï¼šâ€MÃ¼llerâ€™s algorithmâ€å°†å˜æˆâ€Muellers algorithmâ€ã€‚</li>
<li>æŠŠè¿™ä¸ªç»“æœåˆ‡åˆ†æˆå•è¯ï¼Œåœ¨ç©ºæ ¼æˆ–å…¶å®ƒæ ‡ç‚¹ç¬¦å·(é€šå¸¸æ˜¯è¿å­—ç¬¦)å¤„åˆ†å‰²å¼€ã€‚<ul>
<li>æ¨èï¼šå¦‚æœæŸä¸ªå•è¯å·²ç»æœ‰äº†å¸¸ç”¨çš„é©¼å³°è¡¨ç¤ºå½¢å¼ï¼ŒæŒ‰å®ƒçš„ç»„æˆå°†å®ƒåˆ†å‰²å¼€(å¦‚â€AdWordsâ€å°†åˆ†å‰²æˆâ€ad wordsâ€)ã€‚<br>éœ€è¦æ³¨æ„çš„æ˜¯â€iOSâ€å¹¶ä¸æ˜¯ä¸€ä¸ªçœŸæ­£çš„é©¼å³°è¡¨ç¤ºå½¢å¼ï¼Œå› æ­¤è¯¥æ¨èå¯¹å®ƒå¹¶ä¸é€‚ç”¨ã€‚</li>
</ul>
</li>
<li>ç°åœ¨å°†æ‰€æœ‰å­—æ¯éƒ½å°å†™(åŒ…æ‹¬ç¼©å†™)ï¼Œç„¶åå°†å•è¯çš„ç¬¬ä¸€ä¸ªå­—æ¯å¤§å†™ï¼š<ul>
<li>æ¯ä¸ªå•è¯çš„ç¬¬ä¸€ä¸ªå­—æ¯éƒ½å¤§å†™ï¼Œæ¥å¾—åˆ°å¤§é©¼å³°å¼å‘½åã€‚</li>
<li>é™¤äº†ç¬¬ä¸€ä¸ªå•è¯ï¼Œæ¯ä¸ªå•è¯çš„ç¬¬ä¸€ä¸ªå­—æ¯éƒ½å¤§å†™ï¼Œæ¥å¾—åˆ°å°é©¼å³°å¼å‘½åã€‚</li>
</ul>
</li>
<li>æœ€åå°†æ‰€æœ‰çš„å•è¯è¿æ¥èµ·æ¥å¾—åˆ°ä¸€ä¸ªæ ‡è¯†ç¬¦ã€‚</li>
</ol>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code>Prose form                Correct               Incorrect
------------------------------------------------------------------
&quot;XML HTTP request&quot;        XmlHttpRequest        XMLHTTPRequest
&quot;new customer ID&quot;         newCustomerId         newCustomerID
&quot;inner stopwatch&quot;         innerStopwatch        innerStopWatch
&quot;supports IPv6 on iOS?&quot;   supportsIpv6OnIos     supportsIPv6OnIOS
&quot;YouTube importer&quot;        YouTubeImporter
                          YoutubeImporter*
</code></pre><p>åŠ æ˜Ÿå·å¤„è¡¨ç¤ºå¯ä»¥ï¼Œä½†ä¸æ¨èã€‚</p>
<blockquote>
<blockquote>
<p>Noteï¼šåœ¨è‹±è¯­ä¸­ï¼ŒæŸäº›å¸¦æœ‰è¿å­—ç¬¦çš„å•è¯å½¢å¼ä¸å”¯ä¸€ã€‚ä¾‹å¦‚ï¼šâ€nonemptyâ€å’Œâ€non-emptyâ€éƒ½æ˜¯æ­£ç¡®çš„ï¼Œå› æ­¤æ–¹æ³•å<code>checkNonempty</code>å’Œ<code>checkNonEmpty</code>ä¹Ÿéƒ½æ˜¯æ­£ç¡®çš„ã€‚</p>
</blockquote>
</blockquote>
<h2 id="ç¼–ç¨‹å®è·µ"><a href="#ç¼–ç¨‹å®è·µ" class="headerlink" title="ç¼–ç¨‹å®è·µ"></a><a id="Practice">ç¼–ç¨‹å®è·µ</a></h2><h3 id="6-1-Overrideï¼šèƒ½ç”¨åˆ™ç”¨"><a href="#6-1-Overrideï¼šèƒ½ç”¨åˆ™ç”¨" class="headerlink" title="6.1 @Overrideï¼šèƒ½ç”¨åˆ™ç”¨"></a>6.1 @Overrideï¼šèƒ½ç”¨åˆ™ç”¨</h3><p>åªè¦æ˜¯åˆæ³•çš„ï¼Œå°±æŠŠ<code>@Override</code>æ³¨è§£ç»™ç”¨ä¸Šã€‚</p>
<h3 id="6-2-æ•è·çš„å¼‚å¸¸ï¼šä¸èƒ½å¿½è§†"><a href="#6-2-æ•è·çš„å¼‚å¸¸ï¼šä¸èƒ½å¿½è§†" class="headerlink" title="6.2 æ•è·çš„å¼‚å¸¸ï¼šä¸èƒ½å¿½è§†"></a>6.2 æ•è·çš„å¼‚å¸¸ï¼šä¸èƒ½å¿½è§†</h3><p>é™¤äº†ä¸‹é¢çš„ä¾‹å­ï¼Œå¯¹æ•è·çš„å¼‚å¸¸ä¸åšå“åº”æ˜¯æå°‘æ­£ç¡®çš„ã€‚(å…¸å‹çš„å“åº”æ–¹å¼æ˜¯æ‰“å°æ—¥å¿—ï¼Œæˆ–è€…å¦‚æœå®ƒè¢«è®¤ä¸ºæ˜¯ä¸å¯èƒ½çš„ï¼Œåˆ™æŠŠå®ƒå½“ä½œä¸€ä¸ª<code>AssertionError</code>é‡æ–°æŠ›å‡ºã€‚)</p>
<p>å¦‚æœå®ƒç¡®å®æ˜¯ä¸éœ€è¦åœ¨catchå—ä¸­åšä»»ä½•å“åº”ï¼Œéœ€è¦åšæ³¨é‡ŠåŠ ä»¥è¯´æ˜(å¦‚ä¸‹é¢çš„ä¾‹å­)ã€‚</p>
<pre><code>try {
  int i = Integer.parseInt(response);
  return handleNumericResponse(i);
} catch (NumberFormatException ok) {
  // it&apos;s not numeric; that&apos;s fine, just continue
}
return handleTextResponse(response);
</code></pre><p><strong>ä¾‹å¤–</strong>ï¼šåœ¨æµ‹è¯•ä¸­ï¼Œå¦‚æœä¸€ä¸ªæ•è·çš„å¼‚å¸¸è¢«å‘½åä¸º<code>expected</code>ï¼Œåˆ™å®ƒå¯ä»¥è¢«ä¸åŠ æ³¨é‡Šåœ°å¿½ç•¥ã€‚ä¸‹é¢æ˜¯ä¸€ç§éå¸¸å¸¸è§çš„æƒ…å½¢ï¼Œç”¨ä»¥ç¡®ä¿æ‰€æµ‹è¯•çš„æ–¹æ³•ä¼šæŠ›å‡ºä¸€ä¸ªæœŸæœ›ä¸­çš„å¼‚å¸¸ï¼Œ<br>å› æ­¤åœ¨è¿™é‡Œå°±æ²¡æœ‰å¿…è¦åŠ æ³¨é‡Šã€‚</p>
<pre><code>try {
  emptyStack.pop();
  fail();
} catch (NoSuchElementException expected) {
}
</code></pre><h3 id="6-3-é™æ€æˆå‘˜ï¼šä½¿ç”¨ç±»è¿›è¡Œè°ƒç”¨"><a href="#6-3-é™æ€æˆå‘˜ï¼šä½¿ç”¨ç±»è¿›è¡Œè°ƒç”¨" class="headerlink" title="6.3 é™æ€æˆå‘˜ï¼šä½¿ç”¨ç±»è¿›è¡Œè°ƒç”¨"></a>6.3 é™æ€æˆå‘˜ï¼šä½¿ç”¨ç±»è¿›è¡Œè°ƒç”¨</h3><p>ä½¿ç”¨ç±»åè°ƒç”¨é™æ€çš„ç±»æˆå‘˜ï¼Œè€Œä¸æ˜¯å…·ä½“æŸä¸ªå¯¹è±¡æˆ–è¡¨è¾¾å¼ã€‚</p>
<pre><code>Foo aFoo = ...;
Foo.aStaticMethod(); // good
aFoo.aStaticMethod(); // bad
somethingThatYieldsAFoo().aStaticMethod(); // very bad
</code></pre><h3 id="6-4-Finalizers-ç¦ç”¨"><a href="#6-4-Finalizers-ç¦ç”¨" class="headerlink" title="6.4 Finalizers: ç¦ç”¨"></a>6.4 Finalizers: ç¦ç”¨</h3><p>æå°‘ä¼šå»é‡è½½<code>Object.finalize</code>ã€‚</p>
<blockquote>
<blockquote>
<p>Tipï¼šä¸è¦ä½¿ç”¨finalizeã€‚å¦‚æœä½ éè¦ä½¿ç”¨å®ƒï¼Œè¯·å…ˆä»”ç»†é˜…è¯»å’Œç†è§£<a href="http://books.google.com/books?isbn=8131726592" target="_blank" rel="noopener">Effective Java</a><br>ç¬¬7æ¡æ¬¾ï¼šâ€œAvoid Finalizersâ€ï¼Œç„¶åä¸è¦ä½¿ç”¨å®ƒã€‚</p>
</blockquote>
</blockquote>
<h2 id="Javadoc"><a href="#Javadoc" class="headerlink" title="Javadoc"></a><a id="Javadoc">Javadoc</a></h2><h3 id="7-1-æ ¼å¼"><a href="#7-1-æ ¼å¼" class="headerlink" title="7.1 æ ¼å¼"></a>7.1 æ ¼å¼</h3><h4 id="7-1-1-ä¸€èˆ¬å½¢å¼"><a href="#7-1-1-ä¸€èˆ¬å½¢å¼" class="headerlink" title="7.1.1 ä¸€èˆ¬å½¢å¼"></a>7.1.1 ä¸€èˆ¬å½¢å¼</h4><p>Javadocå—çš„åŸºæœ¬æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code>/**
 * Multiple lines of Javadoc text are written here,
 * wrapped normally...
 */
public int method(String p1) { ... }
</code></pre><p>æˆ–è€…æ˜¯ä»¥ä¸‹å•è¡Œå½¢å¼ï¼š</p>
<pre><code>/** An especially short bit of Javadoc. */
</code></pre><p>åŸºæœ¬æ ¼å¼æ€»æ˜¯OKçš„ã€‚å½“æ•´ä¸ªJavadocå—èƒ½å®¹çº³äºä¸€è¡Œæ—¶(ä¸”æ²¡æœ‰Javadocæ ‡è®°@XXX)ï¼Œå¯ä»¥ä½¿ç”¨å•è¡Œå½¢å¼ã€‚</p>
<h4 id="7-1-2-æ®µè½"><a href="#7-1-2-æ®µè½" class="headerlink" title="7.1.2 æ®µè½"></a>7.1.2 æ®µè½</h4><p>ç©ºè¡Œ(å³ï¼ŒåªåŒ…å«æœ€å·¦ä¾§æ˜Ÿå·çš„è¡Œ)ä¼šå‡ºç°åœ¨æ®µè½ä¹‹é—´å’ŒJavadocæ ‡è®°(@XXX)ä¹‹å‰(å¦‚æœæœ‰çš„è¯)ã€‚<br>é™¤äº†ç¬¬ä¸€ä¸ªæ®µè½ï¼Œæ¯ä¸ªæ®µè½ç¬¬ä¸€ä¸ªå•è¯å‰éƒ½æœ‰æ ‡ç­¾<code>&lt;p&gt;</code>ï¼Œå¹¶ä¸”å®ƒå’Œç¬¬ä¸€ä¸ªå•è¯é—´æ²¡æœ‰ç©ºæ ¼ã€‚</p>
<h4 id="7-1-3-Javadocæ ‡è®°"><a href="#7-1-3-Javadocæ ‡è®°" class="headerlink" title="7.1.3 Javadocæ ‡è®°"></a>7.1.3 Javadocæ ‡è®°</h4><p>æ ‡å‡†çš„Javadocæ ‡è®°æŒ‰ä»¥ä¸‹é¡ºåºå‡ºç°ï¼š<code>@param</code>, <code>@return</code>, <code>@throws</code>, <code>@deprecated</code>, å‰é¢è¿™4ç§æ ‡è®°å¦‚æœå‡ºç°ï¼Œæè¿°éƒ½ä¸èƒ½ä¸ºç©ºã€‚<br>å½“æè¿°æ— æ³•åœ¨ä¸€è¡Œä¸­å®¹çº³ï¼Œè¿ç»­è¡Œéœ€è¦è‡³å°‘å†ç¼©è¿›4ä¸ªç©ºæ ¼ã€‚</p>
<h3 id="7-2-æ‘˜è¦ç‰‡æ®µ"><a href="#7-2-æ‘˜è¦ç‰‡æ®µ" class="headerlink" title="7.2 æ‘˜è¦ç‰‡æ®µ"></a>7.2 æ‘˜è¦ç‰‡æ®µ</h3><p>æ¯ä¸ªç±»æˆ–æˆå‘˜çš„Javadocä»¥ä¸€ä¸ªç®€çŸ­çš„æ‘˜è¦ç‰‡æ®µå¼€å§‹ã€‚è¿™ä¸ªç‰‡æ®µæ˜¯éå¸¸é‡è¦çš„ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯å”¯ä¸€å‡ºç°çš„æ–‡æœ¬ï¼Œæ¯”å¦‚åœ¨ç±»å’Œæ–¹æ³•ç´¢å¼•ä¸­ã€‚</p>
<p>è¿™åªæ˜¯ä¸€ä¸ªå°ç‰‡æ®µï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªåè¯çŸ­è¯­æˆ–åŠ¨è¯çŸ­è¯­ï¼Œä½†ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¥å­ã€‚å®ƒä¸ä¼šä»¥<code>A {@code Foo} is a...</code>æˆ–<code>This method returns...</code>å¼€å¤´,<br>å®ƒä¹Ÿä¸ä¼šæ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¥ˆä½¿å¥ï¼Œå¦‚<code>Save the record...</code>ã€‚ç„¶è€Œï¼Œç”±äºå¼€å¤´å¤§å†™åŠè¢«åŠ äº†æ ‡ç‚¹ï¼Œå®ƒçœ‹èµ·æ¥å°±åƒæ˜¯ä¸ªå®Œæ•´çš„å¥å­ã€‚</p>
<blockquote>
<blockquote>
<p>Tipï¼šä¸€ä¸ªå¸¸è§çš„é”™è¯¯æ˜¯æŠŠç®€å•çš„Javadocå†™æˆ<code>/** @return the customer ID */</code>ï¼Œè¿™æ˜¯ä¸æ­£ç¡®çš„ã€‚å®ƒåº”è¯¥å†™æˆ<code>/** Returns the customer ID. */</code>ã€‚</p>
</blockquote>
</blockquote>
<h3 id="7-3-å“ªé‡Œéœ€è¦ä½¿ç”¨Javadoc"><a href="#7-3-å“ªé‡Œéœ€è¦ä½¿ç”¨Javadoc" class="headerlink" title="7.3 å“ªé‡Œéœ€è¦ä½¿ç”¨Javadoc"></a>7.3 å“ªé‡Œéœ€è¦ä½¿ç”¨Javadoc</h3><p>è‡³å°‘åœ¨æ¯ä¸ªpublicç±»åŠå®ƒçš„æ¯ä¸ªpublicå’Œprotectedæˆå‘˜å¤„ä½¿ç”¨Javadocï¼Œä»¥ä¸‹æ˜¯ä¸€äº›ä¾‹å¤–ï¼š</p>
<h4 id="7-3-1-ä¾‹å¤–ï¼šä¸è¨€è‡ªæ˜çš„æ–¹æ³•"><a href="#7-3-1-ä¾‹å¤–ï¼šä¸è¨€è‡ªæ˜çš„æ–¹æ³•" class="headerlink" title="7.3.1 ä¾‹å¤–ï¼šä¸è¨€è‡ªæ˜çš„æ–¹æ³•"></a>7.3.1 ä¾‹å¤–ï¼šä¸è¨€è‡ªæ˜çš„æ–¹æ³•</h4><p>å¯¹äºç®€å•æ˜æ˜¾çš„æ–¹æ³•å¦‚<code>getFoo</code>ï¼ŒJavadocæ˜¯å¯é€‰çš„(å³ï¼Œæ˜¯å¯ä»¥ä¸å†™çš„)ã€‚è¿™ç§æƒ…å†µä¸‹é™¤äº†å†™â€œReturns the fooâ€ï¼Œç¡®å®ä¹Ÿæ²¡æœ‰ä»€ä¹ˆå€¼å¾—å†™äº†ã€‚</p>
<p>å•å…ƒæµ‹è¯•ç±»ä¸­çš„æµ‹è¯•æ–¹æ³•å¯èƒ½æ˜¯ä¸è¨€è‡ªæ˜çš„æœ€å¸¸è§ä¾‹å­äº†ï¼Œæˆ‘ä»¬é€šå¸¸å¯ä»¥ä»è¿™äº›æ–¹æ³•çš„æè¿°æ€§å‘½åä¸­çŸ¥é“å®ƒæ˜¯å¹²ä»€ä¹ˆçš„ï¼Œå› æ­¤ä¸éœ€è¦é¢å¤–çš„æ–‡æ¡£è¯´æ˜ã€‚</p>
<blockquote>
<blockquote>
<p>Tipï¼šå¦‚æœæœ‰ä¸€äº›ç›¸å…³ä¿¡æ¯æ˜¯éœ€è¦è¯»è€…äº†è§£çš„ï¼Œé‚£ä¹ˆä»¥ä¸Šçš„ä¾‹å¤–ä¸åº”ä½œä¸ºå¿½è§†è¿™äº›ä¿¡æ¯çš„ç†ç”±ã€‚ä¾‹å¦‚ï¼Œå¯¹äºæ–¹æ³•å<code>getCanonicalName</code>ï¼Œ<br>å°±ä¸åº”è¯¥å¿½è§†æ–‡æ¡£è¯´æ˜ï¼Œå› ä¸ºè¯»è€…å¾ˆå¯èƒ½ä¸çŸ¥é“è¯è¯­<code>canonical name</code>æŒ‡çš„æ˜¯ä»€ä¹ˆã€‚</p>
</blockquote>
</blockquote>
<h4 id="7-3-2-ä¾‹å¤–ï¼šé‡è½½"><a href="#7-3-2-ä¾‹å¤–ï¼šé‡è½½" class="headerlink" title="7.3.2 ä¾‹å¤–ï¼šé‡è½½"></a>7.3.2 ä¾‹å¤–ï¼šé‡è½½</h4><p>å¦‚æœä¸€ä¸ªæ–¹æ³•é‡è½½äº†è¶…ç±»ä¸­çš„æ–¹æ³•ï¼Œé‚£ä¹ˆJavadocå¹¶éå¿…éœ€çš„ã€‚</p>
<h4 id="7-3-3-å¯é€‰çš„Javadoc"><a href="#7-3-3-å¯é€‰çš„Javadoc" class="headerlink" title="7.3.3 å¯é€‰çš„Javadoc"></a>7.3.3 å¯é€‰çš„Javadoc</h4><p>å¯¹äºåŒ…å¤–ä¸å¯è§çš„ç±»å’Œæ–¹æ³•ï¼Œå¦‚æœ‰éœ€è¦ï¼Œä¹Ÿæ˜¯è¦ä½¿ç”¨Javadocçš„ã€‚å¦‚æœä¸€ä¸ªæ³¨é‡Šæ˜¯ç”¨æ¥å®šä¹‰ä¸€ä¸ªç±»ï¼Œæ–¹æ³•ï¼Œå­—æ®µçš„æ•´ä½“ç›®çš„æˆ–è¡Œä¸ºï¼Œ<br>é‚£ä¹ˆè¿™ä¸ªæ³¨é‡Šåº”è¯¥å†™æˆJavadocï¼Œè¿™æ ·æ›´ç»Ÿä¸€æ›´å‹å¥½ã€‚</p>
<h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a><a id="End">åè®°</a></h2><p>æœ¬æ–‡æ¡£ç¿»è¯‘è‡ª<a href="http://google-styleguide.googlecode.com/svn/trunk/javaguide.html" target="_blank" rel="noopener">Google Java Style</a>ï¼Œ<br>è¯‘è€…<a href="http://weibo.com/hawstein" target="_blank" rel="noopener">@Hawstein</a>ã€‚</p>
<h2 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h2><p>checkstyle <a href="https://github.com/checkstyle/checkstyle/blob/master/src/main/resources/google_checks.xml" target="_blank" rel="noopener">https://github.com/checkstyle/checkstyle/blob/master/src/main/resources/google_checks.xml</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://bohr.me/2015-01-reading-notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="qiubo">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qiubo's life">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015-01-reading-notes/" itemprop="url">2015å¹´01æœˆReading Notes</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2015-01-11T21:52:17+08:00">
                2015-01-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="æ„å»ºç±»å‹å®‰å…¨çš„SQLæŸ¥è¯¢"><a href="#æ„å»ºç±»å‹å®‰å…¨çš„SQLæŸ¥è¯¢" class="headerlink" title="æ„å»ºç±»å‹å®‰å…¨çš„SQLæŸ¥è¯¢"></a>æ„å»ºç±»å‹å®‰å…¨çš„SQLæŸ¥è¯¢</h2><p><a href="http://spring.io/blog/2011/04/26/advanced-spring-data-jpa-specifications-and-querydsl/" target="_blank" rel="noopener">Advanced Spring Data JPA - Specifications and Querydsl</a></p>
<p><a href="http://www.querydsl.com/static/querydsl/latest/reference/html/ch02.html#jpa_integration" target="_blank" rel="noopener">Querying JPA document</a></p>
<p><a href="https://github.com/querydsl/querydsl-jpa-example" target="_blank" rel="noopener">querydsl jpa example</a></p>
<p><a href="http://www.querydsl.com/" target="_blank" rel="noopener"><code>querysql</code></a>å¾ˆæ—©ä¹‹å‰äº†è§£è¿‡,å½“æ—¶æ²¡æœ‰çœ‹åˆ°ä»–çš„ä»·å€¼ï¼Œæœ€è¿‘åœ¨å†™æŸä¸šåŠ¡ç³»ç»Ÿçš„åˆ†é¡µæŸ¥è¯¢è¿‡ç¨‹ä¸­ï¼Œçœ‹åˆ°åŸºäº<code>Specifications</code>å†™çš„å¤æ‚æŸ¥è¯¢è¯­å¥ï¼Œæœ‰ç‚¹ä¹±ï¼Œæ„Ÿè§‰æœ‰ç‚¹ç‚¹ä¸çˆ½ã€‚</p>
<p>jpa æä¾›äº†<code>Metamodel</code>,ä½†æ˜¯<code>Specifications</code>éš¾ç”¨ï¼Œç”Ÿæˆçš„è¯­æ³•ç³–ä¹Ÿéš¾ç”¨ã€‚</p>
<p>ä¸‹é¢åˆ—å‡ºå‡ ç§åœ¨spring-data-jpaä¸­ä½¿ç”¨æŸ¥è¯¢çš„ä¾‹å­ï¼š</p>
<h3 id="1-ä½¿ç”¨querydslï¼š"><a href="#1-ä½¿ç”¨querydslï¼š" class="headerlink" title="1.ä½¿ç”¨querydslï¼š"></a>1.ä½¿ç”¨querydslï¼š</h3><pre><code>public List&lt;SchedulerRule&gt; findByOther(String other) {
   BooleanBuilder builder = new BooleanBuilder();
   builder.or(schedulerRule.memo.containsIgnoreCase(other));
   builder.or(schedulerRule.properties.containsIgnoreCase(other));
   builder.or(schedulerRule.dGroup.containsIgnoreCase(other));
   return new JPAQuery(em).from(schedulerRule).where(builder).orderBy(schedulerRule.id.asc()).list(schedulerRule);
 }
</code></pre><h3 id="2-ä½¿ç”¨åŸç”Ÿsqlï¼š"><a href="#2-ä½¿ç”¨åŸç”Ÿsqlï¼š" class="headerlink" title="2.ä½¿ç”¨åŸç”Ÿsqlï¼š"></a>2.ä½¿ç”¨åŸç”Ÿsqlï¼š</h3><pre><code>public List&lt;SchedulerRule&gt; findByOther(String other) {
    return (List&lt;SchedulerRule&gt;) em
        .createNativeQuery(
            &quot;select * from  scheduler_rule where  memo LIKE :other OR properties LIKE :other OR dGroup LIKE :other order by id&quot;,
            SchedulerRule.class).setParameter(&quot;other&quot;, &quot;%&quot; + other + &quot;%&quot;).getResultList();
}
</code></pre><h3 id="3-ä½¿ç”¨-Query"><a href="#3-ä½¿ç”¨-Query" class="headerlink" title="3.ä½¿ç”¨@Query:"></a>3.ä½¿ç”¨<code>@Query</code>:</h3><pre><code>@Query(&quot;from SchedulerRule as rule where mod(rule.id, :clusterSize)= :mod and rule.status = &apos;NORMAL&apos;&quot;)
List&lt;SchedulerRule&gt; findByClient(@Param(&quot;clusterSize&quot;) int clusterSize, @Param(&quot;mod&quot;) int mod);
</code></pre><h3 id="4-ä½¿ç”¨æ¥å£å‘½åç”ŸæˆæŸ¥è¯¢è¯­å¥ï¼š"><a href="#4-ä½¿ç”¨æ¥å£å‘½åç”ŸæˆæŸ¥è¯¢è¯­å¥ï¼š" class="headerlink" title="4.ä½¿ç”¨æ¥å£å‘½åç”ŸæˆæŸ¥è¯¢è¯­å¥ï¼š"></a>4.ä½¿ç”¨æ¥å£å‘½åç”ŸæˆæŸ¥è¯¢è¯­å¥ï¼š</h3><pre><code>Page&lt;SchedulerRule&gt; findByCreater(String creator, Pageable pageable);
</code></pre><p>åœ¨ä½¿ç”¨querydslæ—¶ï¼Œé€šè¿‡é…ç½®annotation processorå¯ä»¥å¾ˆæ–¹ä¾¿çš„å®Œæˆä»£ç ç”Ÿæˆå·¥ä½œï¼š</p>
<pre><code>&lt;!--querydsl--&gt;
       &lt;plugin&gt;
           &lt;groupId&gt;com.mysema.maven&lt;/groupId&gt;
           &lt;artifactId&gt;apt-maven-plugin&lt;/artifactId&gt;
           &lt;version&gt;1.1.0&lt;/version&gt;
           &lt;configuration&gt;
               &lt;processor&gt;com.mysema.query.apt.jpa.JPAAnnotationProcessor&lt;/processor&gt;
           &lt;/configuration&gt;
           &lt;dependencies&gt;
               &lt;dependency&gt;
                   &lt;groupId&gt;com.mysema.querydsl&lt;/groupId&gt;
                   &lt;artifactId&gt;querydsl-apt&lt;/artifactId&gt;
                   &lt;version&gt;3.6.0&lt;/version&gt;
               &lt;/dependency&gt;
           &lt;/dependencies&gt;
           &lt;executions&gt;
               &lt;execution&gt;
                   &lt;phase&gt;generate-sources&lt;/phase&gt;
                   &lt;goals&gt;
                       &lt;goal&gt;process&lt;/goal&gt;
                   &lt;/goals&gt;
                   &lt;configuration&gt;
                       &lt;outputDirectory&gt;src/gen/java&lt;/outputDirectory&gt;
                   &lt;/configuration&gt;
               &lt;/execution&gt;
           &lt;/executions&gt;
       &lt;/plugin&gt;
</code></pre><h2 id="ActiveJPAâ€”â€”é’ˆå¯¹JPAçš„æ´»åŠ¨è®°å½•æ¨¡å¼"><a href="#ActiveJPAâ€”â€”é’ˆå¯¹JPAçš„æ´»åŠ¨è®°å½•æ¨¡å¼" class="headerlink" title="ActiveJPAâ€”â€”é’ˆå¯¹JPAçš„æ´»åŠ¨è®°å½•æ¨¡å¼"></a>ActiveJPAâ€”â€”é’ˆå¯¹JPAçš„æ´»åŠ¨è®°å½•æ¨¡å¼</h2><p><a href="http://www.infoq.com/cn/articles/ActiveJPA" target="_blank" rel="noopener">http://www.infoq.com/cn/articles/ActiveJPA</a></p>
<p>æ´»åŠ¨è®°å½•æ¨¡å¼åœ¨ä½¿ç”¨ä¸Šæ¥è¯´ï¼Œè¿˜æ˜¯å¾ˆhappyçš„ã€‚ä½†æ˜¯é€ æˆçš„é—®é¢˜æ˜¯ï¼š1.<code>entity</code>å’Œ<code>DO</code>è€¦åˆåœ¨ä¸€èµ·äº†ï¼Œå¦‚æœä¸šåŠ¡å¤æ‚ï¼Œè¿˜æ˜¯è€è€å®å®çš„<code>DDD</code>å§ã€‚2.å¤æ‚çš„æŸ¥è¯¢å¯èƒ½è¿˜æ˜¯éœ€è¦å€ŸåŠ©<code>DAO</code>ã€‚å¦‚æœè‡ªå·±æ¥å®ç°ï¼Œè€ƒè™‘ä¸Šå…³ç³»æ˜ å°„ï¼Œæœ€åå°±æ˜¯æ´»è„±è„±çš„ä¸€ä¸ªhibernatå‡ºæ¥äº†ã€‚è¿™ä¸ªæ¡†æ¶å€ŸåŠ©<code>JPA</code>çš„èƒ½åŠ›ï¼Œç®€å•çš„å®ç°äº†æ´»åŠ¨è®°å½•æ¨¡å¼ã€‚</p>
<p>ä½œè€…é€šè¿‡<code>java instrument api</code>+<code>javassit</code>æ¥ç”Ÿæˆä¾¿äºä½¿ç”¨çš„é™æ€æ–¹æ³•(ä¸éœ€è¦æä¾›ç±»å‹ä¿¡æ¯)ã€‚</p>
<h2 id="ç”¨betamax-mockæ‰å¤–éƒ¨http-httpsä¾èµ–"><a href="#ç”¨betamax-mockæ‰å¤–éƒ¨http-httpsä¾èµ–" class="headerlink" title="ç”¨betamax mockæ‰å¤–éƒ¨http/httpsä¾èµ–"></a>ç”¨betamax mockæ‰å¤–éƒ¨http/httpsä¾èµ–</h2><p><a href="http://freeside.co/betamax/" target="_blank" rel="noopener">http://freeside.co/betamax/</a></p>
<p><code>betamax</code>åœ¨ä½ çš„åº”ç”¨å’Œå¤–éƒ¨åº”ç”¨ä¹‹é—´æ¶èµ·äº†proxy.ä»–ä¼šå½•åˆ¶ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼Œåœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­ç”Ÿæˆ<code>Tape</code>ï¼Œåç»­çš„è¯·æ±‚å°±ä¸ä¼šè°ƒç”¨ç›®æ ‡æœåŠ¡äº†ã€‚æˆ‘ä»¬å¯ä»¥æŠŠ<code>tape</code>å­˜æ”¾åœ¨<code>VCS</code>ä¸­ï¼Œä¹Ÿå¯ä»¥ç¼–è¾‘æ­¤æ–‡ä»¶ï¼Œæ»¡è¶³ç‰¹æ®Šéœ€æ±‚ã€‚</p>
<h2 id="Building-a-Robust-and-Secure-Web-Application-With-Velocity"><a href="#Building-a-Robust-and-Secure-Web-Application-With-Velocity" class="headerlink" title="Building a Robust and Secure Web Application With Velocity"></a>Building a Robust and Secure Web Application With Velocity</h2><p><a href="http://wiki.apache.org/velocity/BuildingSecureWebApplications" target="_blank" rel="noopener">http://wiki.apache.org/velocity/BuildingSecureWebApplications</a></p>
<p>è¿™ç¯‡æ–‡ç« å¾ˆè€äº†ï¼Œä½†æ˜¯å¾ˆå€¼å¾—å‚è€ƒä¸‹ã€‚</p>
<h3 id="Best-Practices-In-Building-A-Secure-Robust-Velocity-Web-Application"><a href="#Best-Practices-In-Building-A-Secure-Robust-Velocity-Web-Application" class="headerlink" title="Best Practices In Building A Secure, Robust Velocity Web Application"></a>Best Practices In Building A Secure, Robust Velocity Web Application</h3><ol>
<li><p>Review all context references for unwanted methods.</p>
<p> ä¸è¦åœ¨Contextä¸­æ”¾å…¥èƒ½æ”¹å˜ç¨‹åºçŠ¶æ€çš„å¼•ç”¨ã€‚</p>
</li>
<li><p>Encode HTML special characters to avoid cross-scripting vulnerabilities.</p>
<p> å¯ä»¥é€šè¿‡<code>EscapeHtmlReference</code>å¯¹ç¬¦åˆç‰¹å®šæ¨¡å¼çš„å¼•ç”¨è¿›è¡Œè¿‡æ»¤ã€‚</p>
</li>
<li><p>Use an up-to-date and properly configured app server.</p>
<p> é‡Œé¢æåˆ°é€šè¿‡<code>Java Security Manager</code>æ¥é™åˆ¶åº”ç”¨çš„è¡Œä¸ºã€‚è¿™ä¹Ÿæ˜¯ä¸€ç§ä¸é”™çš„æ–¹å¼ï¼Œåªæ˜¯çµæ´»æ€§ä¸å¥½ã€‚å¯ä»¥é‡‡ç”¨findbugsæ¥æ£€æŸ¥é™æ€ä»£ç ï¼Œå†æ§åˆ¶å¥½ä¸Šä¼ çš„æ–‡ä»¶/å¯¹ç³»ç»Ÿçš„ç›´æ¥è°ƒç”¨å°±okäº†ã€‚</p>
</li>
</ol>
<ol>
<li><p>Configure Velocity for production use.</p>
<p> åˆ›å»º<code>EventCartridge</code>å’Œ<code>Event Handlers</code>æ¥æ•è·å¼‚å¸¸ï¼Œå¹¶è®°å½•è¿›æ—¥å¿—ã€‚è¿™ä¸ªå·¥ä½œåœ¨<code>com.yjf.common.util.Velocitys</code>é‡Œé¢æ˜¯åšäº†çš„ã€‚ä½†æ˜¯spring mvcé›†æˆ velocityå¯ä»¥åšä¸‹ã€‚æå‰å‘ç°å¼‚å¸¸(ä¸Šæ¬¡CRSFè¿‡æ»¤å™¨é…ç½®å‡ºé”™å¯¼è‡´çš„é¡µé¢ä¹±äº†)ã€‚</p>
</li>
</ol>
<h2 id="jelloâ€“Front-End-Integrated-Solution-for-J2EE-Velocity"><a href="#jelloâ€“Front-End-Integrated-Solution-for-J2EE-Velocity" class="headerlink" title="jelloâ€“Front End Integrated Solution for J2EE Velocity"></a>jelloâ€“Front End Integrated Solution for J2EE Velocity</h2><p><a href="https://github.com/fex-team/jello" target="_blank" rel="noopener">https://github.com/fex-team/jello</a></p>
<p><a href="http://106.186.23.103:8080/" target="_blank" rel="noopener">http://106.186.23.103:8080/</a></p>
<p>ä½¿ç”¨velocityçš„åŒå­¦å¯ä»¥å…³æ³¨ä¸‹ï¼šjelloé’ˆå¯¹æœåŠ¡ç«¯ä¸º JAVA + Velocity çš„å‰ç«¯é›†æˆè§£å†³æ–¹æ¡ˆã€‚ä¸ºä¼˜åŒ–å‰ç«¯å¼€å‘æ•ˆç‡è€Œç”Ÿï¼Œæä¾›å‰åç«¯å¼€å‘åˆ†ç¦»ã€è‡ªåŠ¨æ€§èƒ½ä¼˜åŒ–ã€æ¨¡å—åŒ–å¼€å‘æœºåˆ¶ç­‰åŠŸèƒ½ã€‚</p>
<p><a href="http://106.186.23.103:8080/velocity/index" target="_blank" rel="noopener">æ¨¡æ¿æŠ€å·§</a>éƒ¨åˆ†æ–‡æ¡£é€‚åˆå­¦ä¹ velocityçš„åŒå­¦çœ‹çœ‹ã€‚</p>
<h2 id="æ¨¡æ¿å¼•æ“çš„é€‰æ‹©"><a href="#æ¨¡æ¿å¼•æ“çš„é€‰æ‹©" class="headerlink" title="æ¨¡æ¿å¼•æ“çš„é€‰æ‹©"></a>æ¨¡æ¿å¼•æ“çš„é€‰æ‹©</h2><p>å…³äºthymeleafçš„æ€§èƒ½ï¼š<a href="http://forum.thymeleaf.org/Performance-issue-td3722763.html" target="_blank" rel="noopener">http://forum.thymeleaf.org/Performance-issue-td3722763.html</a><br>æ¨¡å¼freemarkeræ€§èƒ½æœ€å¼ºï¼Œthymeleafæ€§èƒ½å·®è·å¤ªå¤§</p>
<p>æ¯”è¾ƒJVMä¸Šçš„æ¨¡æ¿å¼•æ“ï¼š <a href="http://www.slideshare.net/jreijn/comparing-templateenginesjvm" target="_blank" rel="noopener">http://www.slideshare.net/jreijn/comparing-templateenginesjvm</a></p>
<p>thymeleafçš„ä¼˜ç‚¹ä¸»è¦åœ¨å’Œå‰ç«¯ç»“åˆèµ·æ¥å¾ˆä¸é”™ï¼Œå‰ç«¯åˆ‡å®Œå›¾ï¼Œç„¶ååŠ ä¸ŠåŠ¨æ€æ•°æ®çš„éƒ¨åˆ†å°±okäº†ã€‚é¡µé¢ä¸éœ€è¦æœåŠ¡ç«¯ä¹Ÿèƒ½æ¸²æŸ“å‡ºæ¥ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="qiubo" />
            
              <p class="site-author-name" itemprop="name">qiubo</p>
              <p class="site-description motion-element" itemprop="description">Keep running!</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">57</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">åˆ†ç±»</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">74</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/bohrqiu" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i></a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:bohrqiu@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i></a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://qiuduo.me/" title="qiuduo" target="_blank">qiuduo</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://thanhong.me/" title="daidai" target="_blank">daidai</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2013 &mdash; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">qiubo</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="//cdn.bootcss.com/jquery/2.1.3/jquery.min.js"></script>
  

  
  
    <script type="text/javascript" src="//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js"></script>
  

  
  
    <script type="text/javascript" src="//cdn.bootcss.com/jquery_lazyload/1.9.7/jquery.lazyload.min.js"></script>
  

  
  
    <script type="text/javascript" src="//cdn.bootcss.com/velocity/1.2.1/velocity.min.js"></script>
  

  
  
    <script type="text/javascript" src="//cdn.bootcss.com/velocity/1.2.1/velocity.ui.min.js"></script>
  

  
  
    <script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
